!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequire3c29;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire3c29=o);var a,i=o("bpxeT"),c=o("2TvXO"),d=o("2PuEF"),u={save:function(e,t){try{var r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.error("Set state error: ",e.message)}},load:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:function(e){try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}},clear:function(){try{localStorage.clear()}catch(e){console.error("Get state error: ",e.message)}}};function s(e,t,r,n,o,a,i){return'<img src="'.concat(e||"src/images/noimage/noImage-desk@2x.png",'" alt="book cover: ').concat(t||"No title",'"\n  width="100" height="100">\n  <h2>').concat(t||"No title","</h2>\n  <p>").concat(r||"No author","</p>\n  <p>").concat(n||"No description",'</p>\n  <a href="').concat(o,'" target="_blank" rel="noreferrer noopener">Amazon</a>\n<a href="').concat(a,'" target="_blank" rel="noreferrer noopener">Apple Books</a>\n<a href="').concat(i,'" target="_blank" rel="noreferrer noopener">Barnes and Noble</a>')}var l="booksInShopingList",p={id:[]},f=new(0,d.BookAPI),b=u.save,m=u.load,v=document.querySelector('[data-action="booksContainer"]'),h=document.querySelector(".js-backdrop"),g=document.querySelector('[data-action="popup-data-markup"]'),k=document.querySelector(".close-popup"),y=document.querySelector(".add-book-button"),w=document.querySelector(".remove-book-button"),A=document.querySelector(".remove-book-text");function S(){return(S=e(i)(e(c).mark((function t(r){var n,o,i,d,u,b;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),r.currentTarget!==r.target){e.next=3;break}return e.abrupt("return");case 3:if("see-more-btn"!==r.target.dataset.role){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,a=r.target.closest(".book-card").dataset.id,f.id=a,e.next=10,f.getBooksById();case 10:n=e.sent,o=n.book_image,i=n.title,d=n.author,u=n.description,b=n.buy_links,g.innerHTML=s(o,i,d,u,b[0].url,b[1].url,b[2].url),(p=m(l)||{id:[]}).id.includes(a)?x(!0):x(!1),window.addEventListener("keydown",E),document.body.classList.add("show-popup"),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5);case 26:case"end":return e.stop()}}),t,null,[[5,23]])})))).apply(this,arguments)}function x(e){e?(w.removeAttribute("hidden"),A.removeAttribute("hidden")):y.removeAttribute("hidden")}function L(){window.removeEventListener("keydown",E),document.body.classList.remove("show-popup"),y.setAttribute("hidden",!0),w.setAttribute("hidden",!0),A.setAttribute("hidden",!0)}function E(e){"Escape"===e.code&&L()}v.addEventListener("click",(function(e){return S.apply(this,arguments)})),h.addEventListener("click",(function(e){e.currentTarget===e.target&&L()})),k.addEventListener("click",L),y.addEventListener("click",(function(){p.id.push(a),b(l,p),y.setAttribute("hidden",!0),w.removeAttribute("hidden"),A.removeAttribute("hidden")})),w.addEventListener("click",(function(){var e=p.id.filter((function(e){return e!==a}));p.id=e,b(l,p),w.setAttribute("hidden",!0),A.setAttribute("hidden",!0),y.removeAttribute("hidden")}))}();
//# sourceMappingURL=index.eb03e010.js.map
