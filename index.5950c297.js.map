{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-dc3d2c5170715157.js","src/js/popup.js","src/js/localStorage.js","node_modules/@parcel/runtime-js/lib/runtime-01fa5d5afca2577e.js","node_modules/@parcel/runtime-js/lib/runtime-1306f5cca8ebabe0.js","node_modules/@parcel/runtime-js/lib/runtime-1d5eb1055b340bc9.js","node_modules/@parcel/runtime-js/lib/runtime-1c90f77e875e12a8.js","node_modules/@parcel/runtime-js/lib/runtime-1fba6437b630928b.js","node_modules/@parcel/runtime-js/lib/runtime-ca99d492619bf4f6.js","src/js/createMarkupModal.js","node_modules/@parcel/runtime-js/lib/runtime-271239a9d03a21cb.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"lCRWP\\\":\\\"index.5950c297.js\\\",\\\"lVjcj\\\":\\\"noImage-desk@1x.1332fa8f.png\\\",\\\"1alCl\\\":\\\"image-1@1x.626c9508.png\\\",\\\"3Tr0J\\\":\\\"image-1@2x.104a65be.png\\\",\\\"2t8gc\\\":\\\"image-2@1x.652b354e.png\\\",\\\"cQxLU\\\":\\\"image-2@2x.15632d7d.png\\\",\\\"k3dFm\\\":\\\"image-3@1x.e377c706.png\\\",\\\"dNbsd\\\":\\\"image-3@2x.62451a44.png\\\"}\"));","import { BookAPI } from './bookAPI';\nimport storage from './localStorage';\nimport { createBookMarkup } from './createMarkupModal';\n\nlet BOOK_ID;\nconst KEY_LS = 'booksInShopingList';\nlet BOOKS_IDS = {\n  id: [],\n};\nconst api = new BookAPI();\nconst { save, load } = storage;\n\nconst booksContainerEl = document.querySelector(\n  '[data-action=\"booksContainer\"]'\n);\nconst backdropEl = document.querySelector('.js-backdrop');\nconst markDataContainerEl = document.querySelector(\n  '[data-action=\"popup-data-markup\"]'\n);\nconst closePopupBtnEl = document.querySelector('.close-popup');\nconst addBookBtnEl = document.querySelector('.add-book-button');\nconst removeBookBtnEl = document.querySelector('.remove-book-button');\nconst removeBookTextEl = document.querySelector('.remove-book-text');\n\nbooksContainerEl.addEventListener('click', onBooksContainerClick);\nbackdropEl.addEventListener('click', onBackdropClick);\nclosePopupBtnEl.addEventListener('click', onCloseBtnClick);\naddBookBtnEl.addEventListener('click', onAddBookBtnClick);\nremoveBookBtnEl.addEventListener('click', onRemoveBookBtnClick);\n\nasync function onBooksContainerClick(e) {\n  e.preventDefault();\n  if (e.currentTarget === e.target) {\n    return;\n  }\n  if (e.target.dataset.role === 'see-more-btn') {\n    return;\n  }\n  try {\n    // Тут робимо запит і передаємо данні на відмальовку у функцію\n    BOOK_ID = e.target.closest('.book-card').dataset.id;\n    api.id = BOOK_ID;\n    const { book_image, title, author, description, buy_links } =\n      await api.getBooksById();\n    markDataContainerEl.innerHTML = createBookMarkup(\n      book_image,\n      title,\n      author,\n      description,\n      buy_links[0].url,\n      buy_links[1].url,\n      buy_links[2].url\n    );\n\n    // Звертаємося до локалки і перевіряємо наявність книжки, в залеж. від відповіді виводим кнопку\n    // додати або видалити\n    BOOKS_IDS = load(KEY_LS) || {\n      id: [],\n    };\n    if (BOOKS_IDS.id.includes(BOOK_ID)) {\n      showAddOrRemoveBtn(true);\n    } else {\n      showAddOrRemoveBtn(false);\n    }\n\n    window.addEventListener('keydown', onEscPress);\n    document.body.classList.add('show-popup');\n  } catch {\n    err => console.log(err.message);\n  }\n}\n\n// Показуємо кнопку в залежності від значення флажка true or false.\nfunction showAddOrRemoveBtn(bookInLs) {\n  if (bookInLs) {\n    removeBookBtnEl.removeAttribute('hidden');\n    removeBookTextEl.removeAttribute('hidden');\n  } else {\n    addBookBtnEl.removeAttribute('hidden');\n  }\n}\n\nfunction onAddBookBtnClick() {\n  // Записуємо данні в локал сторейдж\n  // Замінюємо кнопку на ремув\n  BOOKS_IDS.id.push(BOOK_ID);\n  save(KEY_LS, BOOKS_IDS);\n\n  addBookBtnEl.setAttribute('hidden', true);\n  removeBookBtnEl.removeAttribute('hidden');\n  removeBookTextEl.removeAttribute('hidden');\n}\n\nfunction onRemoveBookBtnClick() {\n  // Видаляємо дані з локалки\n  // Замінюємо кнопку на едд\n  const newArrr = BOOKS_IDS.id.filter(item => item !== BOOK_ID);\n  BOOKS_IDS.id = newArrr;\n  save(KEY_LS, BOOKS_IDS);\n  removeBookBtnEl.setAttribute('hidden', true);\n  removeBookTextEl.setAttribute('hidden', true);\n  addBookBtnEl.removeAttribute('hidden');\n}\n\nfunction onCloseBtnClick() {\n  window.removeEventListener('keydown', onEscPress);\n  document.body.classList.remove('show-popup');\n\n  addBookBtnEl.setAttribute('hidden', true);\n  removeBookBtnEl.setAttribute('hidden', true);\n  removeBookTextEl.setAttribute('hidden', true);\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseBtnClick();\n  }\n}\n\nfunction onEscPress(e) {\n  if (e.code === 'Escape') {\n    onCloseBtnClick();\n  }\n}\n\nexport { BOOKS_IDS };\n","// Файлик для работы с локальным хранилищем\n\n// Использовать вот так\n// import storage from './storage';\n// const { save, load } = storage;\n// save(CONST_ID, data); // Запись в local storage\n// const playerNewTime = load(CONST_ID); // Чтение\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst clear = () => {\n  try {\n    localStorage.clear();\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n  clear,\n};\n","module.exports = require('./helpers/bundle-url').getBundleURL('lCRWP') + require('./helpers/bundle-manifest').resolve(\"lVjcj\");","module.exports = require('./helpers/bundle-url').getBundleURL('lCRWP') + require('./helpers/bundle-manifest').resolve(\"1alCl\");","module.exports = require('./helpers/bundle-url').getBundleURL('lCRWP') + require('./helpers/bundle-manifest').resolve(\"3Tr0J\");","module.exports = require('./helpers/bundle-url').getBundleURL('lCRWP') + require('./helpers/bundle-manifest').resolve(\"2t8gc\");","module.exports = require('./helpers/bundle-url').getBundleURL('lCRWP') + require('./helpers/bundle-manifest').resolve(\"cQxLU\");","module.exports = require('./helpers/bundle-url').getBundleURL('lCRWP') + require('./helpers/bundle-manifest').resolve(\"k3dFm\");","import noImg from '../images/noImage/noImage-desk@1x.png';\nimport imgAmaz1x from '../images/modal/image-1@1x.png';\nimport imgAmaz2x from '../images/modal/image-1@2x.png';\nimport imgApBooks1x from '../images/modal/image-2@1x.png';\nimport imgApBooks2x from '../images/modal/image-2@2x.png';\nimport imgBarnAndNob1x from '../images/modal/image-3@1x.png';\nimport imgBarnAndNob2x from '../images/modal/image-3@2x.png';\n\nexport function createBookMarkup(\n  bookImg,\n  title,\n  author,\n  description,\n  urlAmaz,\n  urlApBooks,\n  urlBarnAndNob\n) {\n  return `<div class=\"popup-box-img\"><img src=\"${\n    bookImg || noImg\n  }\" alt=\"book cover: ${title || 'No title'}\" class=\"popup-img\"></div>\n<div class=\"popup-text\">\n    <h2 class=\"popup-title\">${title || 'No title'}</h2>\n    <p class=\"popup-author\">${author || 'No author'}</p>\n    <p class=\"popup-description\">${description || 'No description'}</p>\n    <div class=\"popup-img-links\">\n        <a href=\"${\n          urlAmaz || 'https://www.kualo.co.uk/404'\n        }\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\">\n            <img srcset=\"${imgAmaz1x} 1x, ${imgAmaz2x} 2x\" src=\"${imgAmaz1x}\" alt=\"Amazon shop\" width=\"62\"\n                height=\"19\" />\n        </a>\n        <a href=\"${\n          urlApBooks || 'https://www.kualo.co.uk/404'\n        }\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\"><img\n                srcset=\"${imgApBooks1x} 1x, ${imgApBooks2x} 2x\" src=\"${imgApBooks1x}\" alt=\"Apple Books shop\" width=\"33\"\n                height=\"32\" /></a>\n        <a href=\"${\n          urlBarnAndNob || 'https://www.kualo.co.uk/404'\n        }\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\"><img\n                srcset=\"${imgBarnAndNob1x} 1x, ${imgBarnAndNob2x} 2x\" src=\"${imgBarnAndNob1x}\"\n                alt=\"Barnes and Noble shop\" width=\"38\" height=\"36\" /></a>\n    </div>\n</div>`;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('lCRWP') + require('./helpers/bundle-manifest').resolve(\"dNbsd\");"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$0aa9cd13c14a6e1e$export$2e2bcd8739ae039","save","key","value","serializedState","stringify","localStorage","setItem","error","console","message","load","getItem","undefined","remove","removeItem","clear","$7938f2b6d7da14bd$exports","getBundleURL","resolve","$e4ed1d71d44b4b84$exports","$68dde6ea2fe17dda$exports","$138f9cbd0b023dab$exports","$cdebc45763bff72b$exports","$c07b6da5bec7de09$exports","$fed5289f9aa3b6b0$var$BOOK_ID","$fb41cd2eb6955eb4$export$fc330cc8afb2a391","bookImg","title","author","description","urlAmaz","urlApBooks","urlBarnAndNob","concat","$parcel$interopDefault","$a594047a9b6b010e$exports","$fed5289f9aa3b6b0$var$KEY_LS","$fed5289f9aa3b6b0$export$1381f8da19e39170","id","$fed5289f9aa3b6b0$var$api","$2PuEF","BookAPI","$fed5289f9aa3b6b0$var$save","$fed5289f9aa3b6b0$var$load","$fed5289f9aa3b6b0$var$booksContainerEl","document","querySelector","$fed5289f9aa3b6b0$var$backdropEl","$fed5289f9aa3b6b0$var$markDataContainerEl","$fed5289f9aa3b6b0$var$closePopupBtnEl","$fed5289f9aa3b6b0$var$addBookBtnEl","$fed5289f9aa3b6b0$var$removeBookBtnEl","$fed5289f9aa3b6b0$var$removeBookTextEl","$fed5289f9aa3b6b0$var$_onBooksContainerClick","$2TvXO","mark","_callee","e","ref","book_image","buy_links","preventDefault","currentTarget","target","dataset","role","closest","getBooksById","_ctx","sent","innerHTML","url","includes","$fed5289f9aa3b6b0$var$showAddOrRemoveBtn","window","addEventListener","$fed5289f9aa3b6b0$var$onEscPress","body","classList","add","apply","this","arguments","bookInLs","removeAttribute","$fed5289f9aa3b6b0$var$onCloseBtnClick","removeEventListener","setAttribute","code","push","newArrr","filter","item"],"version":3,"file":"index.5950c297.js.map"}