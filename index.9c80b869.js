function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},n=t.parcelRequire3c29;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire3c29=n),n("kyEFX").register(JSON.parse('{"dRFTD":"index.9c80b869.js","9c1dv":"noImage-desk@1x.1332fa8f.png","itRYJ":"image-1@1x.626c9508.png","hLmfu":"image-1@2x.104a65be.png","iyNay":"image-2@1x.652b354e.png","8x2dm":"image-2@2x.15632d7d.png","ep89d":"image-3@1x.e377c706.png","ef2uk":"image-3@2x.62451a44.png"}'));var i=n("hkoFk");var a,s={save:(e,t)=>{try{const r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.error("Set state error: ",e.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:e=>{try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}},clear:()=>{try{localStorage.clear()}catch(e){console.error("Get state error: ",e.message)}}};a=new URL(n("kyEFX").resolve("9c1dv"),import.meta.url).toString();var d;d=new URL(n("kyEFX").resolve("itRYJ"),import.meta.url).toString();var c;c=new URL(n("kyEFX").resolve("hLmfu"),import.meta.url).toString();var l;l=new URL(n("kyEFX").resolve("iyNay"),import.meta.url).toString();var u;u=new URL(n("kyEFX").resolve("8x2dm"),import.meta.url).toString();var p;p=new URL(n("kyEFX").resolve("ep89d"),import.meta.url).toString();var m;function g(t,r,o,n,i,s,g){return`<div class="popup-box-img"><img src="${t||e(a)}" alt="book cover: ${r||"No title"}" class="popup-img"></div>\n<div class="popup-text">\n    <h2 class="popup-title">${r||"No title"}</h2>\n    <p class="popup-author">${o||"No author"}</p>\n    <p class="popup-description">${n||"No description"}</p>\n    <div class="popup-img-links">\n        <a href="${i}" class="popup-link" target="_blank" rel="noreferrer noopener">\n            <img srcset="${e(d)} 1x, ${e(c)} 2x" src="${e(d)}" alt="Amazon shop" width="62"\n                height="19" />\n        </a>\n        <a href="${s}" class="popup-link" target="_blank" rel="noreferrer noopener"><img\n                srcset="${e(l)} 1x, ${e(u)} 2x" src="${e(l)}" alt="Apple Books shop" width="33"\n                height="32" /></a>\n        <a href="${g}" class="popup-link" target="_blank" rel="noreferrer noopener"><img\n                srcset="${e(p)} 1x, ${e(m)} 2x" src="${e(p)}"\n                alt="Barnes and Noble shop" width="38" height="36" /></a>\n    </div>\n</div>`}let v;m=new URL(n("kyEFX").resolve("ef2uk"),import.meta.url).toString();let f={id:[]};const h=new(0,i.BookAPI),{save:b,load:k}=s,y=document.querySelector('[data-action="booksContainer"]'),S=document.querySelector(".js-backdrop"),w=document.querySelector('[data-action="popup-data-markup"]'),E=document.querySelector(".close-popup"),_=document.querySelector(".add-book-button"),x=document.querySelector(".remove-book-button"),A=document.querySelector(".remove-book-text");function L(e){e?(x.removeAttribute("hidden"),A.removeAttribute("hidden")):_.removeAttribute("hidden")}function R(){window.removeEventListener("keydown",F),document.body.classList.remove("show-popup"),_.setAttribute("hidden",!0),x.setAttribute("hidden",!0),A.setAttribute("hidden",!0)}function F(e){"Escape"===e.code&&R()}y.addEventListener("click",(async function(e){if(e.preventDefault(),e.currentTarget===e.target)return;if("see-more-btn"===e.target.dataset.role)return;try{v=e.target.closest(".book-card").dataset.id,h.id=v;const{book_image:t,title:r,author:o,description:n,buy_links:i}=await h.getBooksById();w.innerHTML=g(t,r,o,n,i[0].url,i[1].url,i[2].url),f=k("booksInShopingList")||{id:[]},f.id.includes(v)?L(!0):L(!1),window.addEventListener("keydown",F),document.body.classList.add("show-popup")}catch{}})),S.addEventListener("click",(function(e){e.currentTarget===e.target&&R()})),E.addEventListener("click",R),_.addEventListener("click",(function(){f.id.push(v),b("booksInShopingList",f),_.setAttribute("hidden",!0),x.removeAttribute("hidden"),A.removeAttribute("hidden")})),x.addEventListener("click",(function(){const e=f.id.filter((e=>e!==v));f.id=e,b("booksInShopingList",f),x.setAttribute("hidden",!0),A.setAttribute("hidden",!0),_.removeAttribute("hidden")}));
//# sourceMappingURL=index.9c80b869.js.map
