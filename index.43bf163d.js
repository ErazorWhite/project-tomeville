function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},r=t.parcelRequire3c29;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequire3c29=r),r("kyEFX").register(JSON.parse('{"5ZPII":"index.43bf163d.js","9c1dv":"noImage-desk@1x.1332fa8f.png","itRYJ":"image-1@1x.626c9508.png","hLmfu":"image-1@2x.104a65be.png","iyNay":"image-2@1x.652b354e.png","8x2dm":"image-2@2x.15632d7d.png","ep89d":"image-3@1x.e377c706.png","ef2uk":"image-3@2x.62451a44.png","8bHsX":"index.cc7708d3.js"}'));var s,a=r("hkoFk");function i(t){return t.map((({list_name:t,books:o})=>`\n      <li class="bs-books__categories-item">\n        <h2 class="bs-books__category-title">${t}</h2>\n        <ul class="bs-books__list">\n          ${o.map((({_id:t,list_name:o,author:n,book_image:r,title:a})=>`\n              <li class="bs-books__item book-card" data-id="${t}">\n              <p class="bs-books__category">${o}</p>\n              <a class="bs-books__link" href="#">\n                  <div class="bs-books__thumb">\n                      <img src="${r||e(s)}" alt="book cover: ${a||"No title"}"class="bs-books__picture" width="335" height="485" loading="lazy">\n                      <p class="bs-books__view">quick view</p>\n                  </div>\n                  <div class="bs-books__box">\n                  <h3 class="bs-books__title">${a||"No title"}</h3>\n                  <p class="bs-books__author">${n||"No author"}</p>\n                  </div>\n                  </a>\n                  <div class="bs-books__button-box">\n                    <button class="bs-books__see-more-btn" type="button" data-role="see-more-btn" data-list="${o}">see more</button>\n                  </div>\n              </li>`)).join("")}\n        </ul>\n      </li>`)).join("")}s=new URL(r("kyEFX").resolve("9c1dv"),import.meta.url).toString();var c=r("7Y9D8"),l=r("04jNI");async function d(){(0,l.spinerStart)();const e=new(0,a.BookAPI),t=document.querySelector(".bs-books__categories-list"),o=await e.getTopBooks();0!=o.length?(i(o),t.insertAdjacentHTML("beforeend",i(o)),(0,l.spinerStop)()):c.Notify.failure("There are no books, sorry.")}document.querySelector(".js-bs-books__section").addEventListener("click",(function(e){const t=e.target.getAttribute("data-role");if(!t||"see-more-btn"!==t)return;const o=e.target.getAttribute("data-list");document.querySelector(`[data-category="${o}"]`).dispatchEvent(new Event("click"))})),d();a=r("hkoFk");var u,b={save:(e,t)=>{try{const o=JSON.stringify(t);localStorage.setItem(e,o)}catch(e){console.error("Set state error: ",e.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:e=>{try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}},clear:()=>{try{localStorage.clear()}catch(e){console.error("Get state error: ",e.message)}}};u=new URL(r("kyEFX").resolve("itRYJ"),import.meta.url).toString();var p;p=new URL(r("kyEFX").resolve("hLmfu"),import.meta.url).toString();var k;k=new URL(r("kyEFX").resolve("iyNay"),import.meta.url).toString();var m;m=new URL(r("kyEFX").resolve("8x2dm"),import.meta.url).toString();var g;g=new URL(r("kyEFX").resolve("ep89d"),import.meta.url).toString();var _;function y(t,o,n,r,a,i,c){return`<div class="popup-box-img"><img src="${t||e(s)}" alt="book cover: ${o||"No title"}" class="popup-img"></div>\n<div class="popup-text">\n    <h2 class="popup-title">${o||"No title"}</h2>\n    <p class="popup-author">${n||"No author"}</p>\n    <p class="popup-description">${r||"No description"}</p>\n    <div class="popup-img-links">\n        <a href="${a||"https://www.kualo.co.uk/404"}" class="popup-link" target="_blank" rel="noreferrer noopener">\n            <img srcset="${e(u)} 1x, ${e(p)} 2x" src="${e(u)}" alt="Amazon shop" width="62"\n                height="19" loading="lazy"/>\n        </a>\n        <a href="${i||"https://www.kualo.co.uk/404"}" class="popup-link" target="_blank" rel="noreferrer noopener"><img\n                srcset="${e(k)} 1x, ${e(m)} 2x" src="${e(k)}" alt="Apple Books shop" width="33"\n                height="32" loading="lazy"/></a>\n        <a href="${c||"https://www.kualo.co.uk/404"}" class="popup-link" target="_blank" rel="noreferrer noopener"><img\n                srcset="${e(g)} 1x, ${e(_)} 2x" src="${e(g)}"\n                alt="Barnes and Noble shop" width="38" height="36" loading="lazy"/></a>\n    </div>\n</div>`}_=new URL(r("kyEFX").resolve("ef2uk"),import.meta.url).toString();var h=r("jQ7WT");let v;let f={id:[]};const S=new(0,a.BookAPI),{save:w,load:$}=b;let L,A=document.querySelector('[data-action="booksContainer"]'),x=document.querySelector(".js-backdrop"),E=document.querySelector('[data-action="popup-data-markup"]'),q=document.querySelector(".close-popup"),H=document.querySelector(".add-book-button"),F=document.querySelector(".remove-book-button"),j=document.querySelector(".remove-book-text");function N(){A=document.querySelector('[data-action="booksContainer"]'),x=document.querySelector(".js-backdrop"),E=document.querySelector('[data-action="popup-data-markup"]'),q=document.querySelector(".close-popup"),H=document.querySelector(".add-book-button"),F=document.querySelector(".remove-book-button"),j=document.querySelector(".remove-book-text"),R()}function R(){A.addEventListener("click",I),x.addEventListener("click",U),q.addEventListener("click",M),H.addEventListener("click",T),F.addEventListener("click",C)}async function I(e){if(e.preventDefault(),e.currentTarget!==e.target&&"see-more-btn"!==e.target.dataset.role)try{v=e.target.closest(".book-card").dataset.id,S.id=v;const{book_image:t,title:o,author:n,description:r,buy_links:s}=await S.getBooksById();E.innerHTML=y(t,o,n,r,s[0].url,s[1].url,s[2].url),f=$("booksInShopingList")||{id:[]},f.id.includes(v)?B(!0):B(!1),window.addEventListener("keydown",X),document.body.classList.add("show-popup");L=!1?"enableBodyScroll":"disableBodyScroll",h[L](document.body)}catch{}}function B(e){e?(F.removeAttribute("hidden"),j.removeAttribute("hidden")):H.removeAttribute("hidden")}function T(){f.id.push(v),w("booksInShopingList",f),H.setAttribute("hidden",!0),F.removeAttribute("hidden"),j.removeAttribute("hidden")}function C(){const e=f.id.filter((e=>e!==v));f.id=e,w("booksInShopingList",f),F.setAttribute("hidden",!0),j.setAttribute("hidden",!0),H.removeAttribute("hidden")}function M(){window.removeEventListener("keydown",X),document.body.classList.remove("show-popup"),h.enableBodyScroll(document.body),H.setAttribute("hidden",!0),F.setAttribute("hidden",!0),j.setAttribute("hidden",!0)}function U(e){e.currentTarget===e.target&&M()}function X(e){"Escape"===e.code&&M()}R(),r("74Aiq"),r("1wkNH"),r("3oIZ9");a=r("hkoFk"),a=r("hkoFk"),l=r("04jNI");async function z(e){(0,l.spinerStart)();const t=new(0,a.BookAPI),o=document.querySelector(".js-books-container"),n=o.querySelector(".js-category-title"),r=o.querySelector(".js-book-list");try{const o=await t.getBooksByCategory(e),s=o.slice(0,20).map((e=>`\n      <li class="book-card bs-books__item" data-id='${e._id}'>\n      <a class="bs-books__link" href="#">\n      <div class="bs-books__thumb">\n        <img class="bs-books__picture" src="${e.book_image}" alt="${e.author} ${e.title}" loading="lazy">\n      <p class="bs-books__view">quick view</p>\n        </div>\n      <div class="bs-books__box">\n      <h3 class="bs-books__title">${e.title||"No title"}</h3>\n      <p class="bs-books__author">${e.author||"No author"}</p>\n        </div>\n        </a>\n    </li>`)).join("");n.textContent=e;const a=n.textContent.split(" "),i=a[a.length-1];a.pop();const c=a.join(" ");n.textContent=c;const l=document.createElement("span");l.textContent=` ${i}`;n.appendChild(l).classList.add("bs-books__accent"),r.innerHTML=s}catch(e){console.error(e)}(0,l.spinerStop)()}let O=null,J=null;const P=document.querySelector(".js-books-container"),D=document.querySelector(".bs-books__section");function G(e){if(O!==e.target){O&&O.classList.remove("current_category"),e.target.classList.add("current_category"),O=e.target;const t=e.target.dataset.category;document.querySelector(".js-bs-books__section").innerHTML="",e.target==J?(Y(P),D.style.display="",D.innerHTML='<h1 class="bs-books__headline">Best Sellers <span class="bs-books__accent">Books</span></h1>\n        <ul class="bs-books__categories-list" data-action="booksContainer">\n        </ul>',d(),N()):(Y(D),P.style.display="",P.innerHTML='<h1 class="js-category-title bs-books__headline"></h1>\n  <ul class="js-book-list books__list" data-action="booksContainer"></ul>',z(t),N())}}function Y(e){e.innerHTML="",e.style.display="none"}!async function(){const e=new(0,a.BookAPI),t=document.querySelector(".categories-list");try{const o=(await e.getCategoryList()).map((e=>e.list_name));o.sort();const n=o.map((e=>`<li class="categories-item" data-category="${e}">${e}</li>`)).join("");t.innerHTML=`<li class="categories-item current_category" data-category="All categories">All categories</li>${n}`,J=document.querySelector('li.categories-item[data-category="All categories"]'),O=J;document.querySelectorAll(".categories-item").forEach((e=>{e.addEventListener("click",G)}))}catch(e){console.error(e)}}(),r("hw4Fk"),r("ciMc1"),r("8Wl2i");
//# sourceMappingURL=index.43bf163d.js.map
