!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},r=t.parcelRequire3c29;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire3c29=r),r("iE7OH").register(JSON.parse('{"EVgbq":"index.f7387c42.js","lVjcj":"noImage-desk@1x.1332fa8f.png","1alCl":"image-1@1x.626c9508.png","3Tr0J":"image-1@2x.104a65be.png","2t8gc":"image-2@1x.652b354e.png","cQxLU":"image-2@2x.15632d7d.png","k3dFm":"image-3@1x.e377c706.png","dNbsd":"image-3@2x.62451a44.png","fFNaz":"index.05b2db46.js"}'));var a,c=r("bpxeT"),s=r("2TvXO"),i=r("2PuEF");function l(t){return t.map((function(t){var o=t.list_name,n=t.books;return'\n      <li class="bs-books__categories-item">\n        <h2 class="bs-books__category-title">'.concat(o,'</h2>\n        <ul class="bs-books__list">\n          ').concat(n.map((function(t){var o=t._id,n=t.list_name,r=t.author,c=t.book_image,s=t.title;return'\n              <li class="bs-books__item book-card" data-id="'.concat(o,'">\n              <p class="bs-books__category">').concat(n,'</p>\n              <a class="bs-books__link" href="#">\n                  <div class="bs-books__thumb">\n                      <img src="').concat(c||e(a),'" alt="book cover: ').concat(s||"No title",'"class="bs-books__picture" width="335" height="485">\n                      <p class="bs-books__view">quick view</p>\n                  </div>\n                  <div class="bs-books__box">\n                  <h3 class="bs-books__title">').concat(s||"No title",'</h3>\n                  <p class="bs-books__author">').concat(r||"No author",'</p>\n                  </div>\n                  </a>\n                  <div class="bs-books__button-box">\n                    <button class="bs-books__see-more-btn" type="button" data-role="see-more-btn" data-list="').concat(n,'">see more</button>\n                  </div>\n              </li>')})).join(""),"\n        </ul>\n      </li>")})).join("")}a=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("lVjcj");var u=r("6JpON"),d=r("j1lrD");function b(){return p.apply(this,arguments)}function p(){return(p=e(c)(e(s).mark((function t(){var o,n,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.spinerStart)(),o=new(0,i.BookAPI),n=document.querySelector(".bs-books__categories-list"),e.next=5,o.getTopBooks();case 5:if(0!=(r=e.sent).length){e.next=9;break}return u.Notify.failure("There are no books, sorry."),e.abrupt("return");case 9:l(r),n.insertAdjacentHTML("beforeend",l(r)),(0,d.spinerStop)();case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}document.querySelector(".js-bs-books__section").addEventListener("click",(function(e){var t=e.target.getAttribute("data-role");if(t&&"see-more-btn"===t){var o=e.target.getAttribute("data-list");document.querySelector('[data-category="'.concat(o,'"]')).dispatchEvent(new Event("click"))}})),b();c=r("bpxeT"),s=r("2TvXO"),i=r("2PuEF");var g,k={save:function(e,t){try{var o=JSON.stringify(t);localStorage.setItem(e,o)}catch(e){console.error("Set state error: ",e.message)}},load:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:function(e){try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}},clear:function(){try{localStorage.clear()}catch(e){console.error("Get state error: ",e.message)}}};g=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("1alCl");var m;m=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("3Tr0J");var _;_=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("2t8gc");var v;v=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("cQxLU");var h;h=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("k3dFm");var f;function y(t,o,n,r,c,s,i){return'<div class="popup-box-img"><img src="'.concat(t||e(a),'" alt="book cover: ').concat(o||"No title",'" class="popup-img"></div>\n<div class="popup-text">\n    <h2 class="popup-title">').concat(o||"No title",'</h2>\n    <p class="popup-author">').concat(n||"No author",'</p>\n    <p class="popup-description">').concat(r||"No description",'</p>\n    <div class="popup-img-links">\n        <a href="').concat(c||"https://www.kualo.co.uk/404",'" class="popup-link" target="_blank" rel="noreferrer noopener">\n            <img srcset="').concat(e(g)," 1x, ").concat(e(m),' 2x" src="').concat(e(g),'" alt="Amazon shop" width="62"\n                height="19" />\n        </a>\n        <a href="').concat(s||"https://www.kualo.co.uk/404",'" class="popup-link" target="_blank" rel="noreferrer noopener"><img\n                srcset="').concat(e(_)," 1x, ").concat(e(v),' 2x" src="').concat(e(_),'" alt="Apple Books shop" width="33"\n                height="32" /></a>\n        <a href="').concat(i||"https://www.kualo.co.uk/404",'" class="popup-link" target="_blank" rel="noreferrer noopener"><img\n                srcset="').concat(e(h)," 1x, ").concat(e(f),' 2x" src="').concat(e(h),'"\n                alt="Barnes and Noble shop" width="38" height="36" /></a>\n    </div>\n</div>')}f=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("dNbsd");var x,S=r("gnsaF"),w="booksInShopingList",E={id:[]},q=new(0,i.BookAPI),A=k.save,H=k.load,L=document.querySelector('[data-action="booksContainer"]'),j=document.querySelector(".js-backdrop"),N=document.querySelector('[data-action="popup-data-markup"]'),T=document.querySelector(".close-popup"),B=document.querySelector(".add-book-button"),C=document.querySelector(".remove-book-button"),O=document.querySelector(".remove-book-text");function R(){L=document.querySelector('[data-action="booksContainer"]'),j=document.querySelector(".js-backdrop"),N=document.querySelector('[data-action="popup-data-markup"]'),T=document.querySelector(".close-popup"),B=document.querySelector(".add-book-button"),C=document.querySelector(".remove-book-button"),O=document.querySelector(".remove-book-text"),F()}function F(){L.addEventListener("click",J),j.addEventListener("click",D),T.addEventListener("click",P),B.addEventListener("click",V),C.addEventListener("click",I)}function J(e){return M.apply(this,arguments)}function M(){return(M=e(c)(e(s).mark((function t(o){var n,r,a,c,i,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.preventDefault(),o.currentTarget!==o.target){e.next=3;break}return e.abrupt("return");case 3:if("see-more-btn"!==o.target.dataset.role){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,x=o.target.closest(".book-card").dataset.id,q.id=x,e.next=10,q.getBooksById();case 10:n=e.sent,r=n.book_image,a=n.title,c=n.author,i=n.description,l=n.buy_links,N.innerHTML=y(r,a,c,i,l[0].url,l[1].url,l[2].url),(E=H(w)||{id:[]}).id.includes(x)?U(!0):U(!1),window.addEventListener("keydown",G),document.body.classList.add("show-popup"),!1,S["disableBodyScroll"](document.body),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(5);case 29:case"end":return e.stop()}}),t,null,[[5,26]])})))).apply(this,arguments)}function U(e){e?(C.removeAttribute("hidden"),O.removeAttribute("hidden")):B.removeAttribute("hidden")}function V(){E.id.push(x),A(w,E),B.setAttribute("hidden",!0),C.removeAttribute("hidden"),O.removeAttribute("hidden")}function I(){var e=E.id.filter((function(e){return e!==x}));E.id=e,A(w,E),C.setAttribute("hidden",!0),O.setAttribute("hidden",!0),B.removeAttribute("hidden")}function P(){window.removeEventListener("keydown",G),document.body.classList.remove("show-popup"),S.enableBodyScroll(document.body),B.setAttribute("hidden",!0),C.setAttribute("hidden",!0),O.setAttribute("hidden",!0)}function D(e){e.currentTarget===e.target&&P()}function G(e){"Escape"===e.code&&P()}F(),r("23Ajj"),r("2V9cG"),r("gjDBM");c=r("bpxeT"),s=r("2TvXO"),i=r("2PuEF"),c=r("bpxeT"),s=r("2TvXO"),i=r("2PuEF"),d=r("j1lrD");function X(e){return z.apply(this,arguments)}function z(){return(z=e(c)(e(s).mark((function t(o){var n,r,a,c,l,u,b,p,g,k,m;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.spinerStart)(),n=new(0,i.BookAPI),r=document.querySelector(".js-books-container"),a=r.querySelector(".js-category-title"),c=r.querySelector(".js-book-list"),e.prev=5,e.next=8,n.getBooksByCategory(o);case 8:l=e.sent,u=l.slice(0,20),b=u.map((function(e){return'\n      <li class="book-card bs-books__item" data-id=\''.concat(e._id,'\'>\n      <a class="bs-books__link" href="#">\n      <div class="bs-books__thumb">\n        <img class="bs-books__picture" src="').concat(e.book_image,'" alt="').concat(e.author," ").concat(e.title,'" loading="lazy">\n      <p class="bs-books__view">quick view</p>\n        </div>\n      <div class="bs-books__box">\n      <h3 class="bs-books__title">').concat(e.title||"No title",'</h3>\n      <p class="bs-books__author">').concat(e.author||"No author","</p>\n        </div>\n        </a>\n    </li>")})).join(""),a.textContent=o,p=a.textContent.split(" "),g=p[p.length-1],p.pop(),k=p.join(" "),a.textContent=k,(m=document.createElement("span")).textContent=" ".concat(g),a.appendChild(m).classList.add("bs-books__accent"),c.innerHTML=b,e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),console.error(e.t0);case 27:(0,d.spinerStop)();case 28:case"end":return e.stop()}}),t,null,[[5,24]])})))).apply(this,arguments)}var Q=null,K=null,W=document.querySelector(".js-books-container"),Y=document.querySelector(".bs-books__section");function Z(){return(Z=e(c)(e(s).mark((function t(){var o,n,r,a,c;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new(0,i.BookAPI),n=document.querySelector(".categories-list"),e.prev=2,e.next=5,o.getCategoryList();case 5:r=e.sent,(a=r.map((function(e){return e.list_name}))).sort(),c=a.map((function(e){return'<li class="categories-item" data-category="'.concat(e,'">').concat(e,"</li>")})).join(""),n.innerHTML='<li class="categories-item current_category" data-category="All categories">All categories</li>'.concat(c),K=document.querySelector('li.categories-item[data-category="All categories"]'),Q=K,document.querySelectorAll(".categories-item").forEach((function(e){e.addEventListener("click",$)})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:case"end":return e.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function $(e){if(Q!==e.target){Q&&Q.classList.remove("current_category"),e.target.classList.add("current_category"),Q=e.target;var t=e.target.dataset.category;document.querySelector(".js-bs-books__section").innerHTML="",e.target==K?(ee(W),Y.style.display="",Y.innerHTML='<h1 class="bs-books__headline">Best Sellers <span class="bs-books__accent">Books</span></h1>\n        <ul class="bs-books__categories-list" data-action="booksContainer">\n        </ul>',b(),R()):(ee(Y),W.style.display="",W.innerHTML='<h1 class="js-category-title bs-books__headline"></h1>\n  <ul class="js-book-list books__list" data-action="booksContainer"></ul>',X(t),R())}}function ee(e){e.innerHTML="",e.style.display="none"}!function(){Z.apply(this,arguments)}(),r("c2iWR"),r("5rKuw"),r("lGhGt")}();
//# sourceMappingURL=index.f7387c42.js.map
