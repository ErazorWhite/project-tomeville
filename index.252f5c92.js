var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},o=e.parcelRequire3c29;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in r){var o=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,o.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequire3c29=o);var n=o("hkoFk");var i={save:(e,t)=>{try{const r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.error("Set state error: ",e.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:e=>{try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}},clear:()=>{try{localStorage.clear()}catch(e){console.error("Get state error: ",e.message)}}};function a(e,t,r,o,n,i,a){return`<img src="${e||"src/images/noimage/noImage-desk@2x.png"}" alt="book cover: ${t||"No title"}"\n  width="100" height="100">\n  <h2>${t||"No title"}</h2>\n  <p>${r||"No author"}</p>\n  <p>${o||"No description"}</p>\n  <a href="${n}" target="_blank" rel="noreferrer noopener">Amazon</a>\n<a href="${i}" target="_blank" rel="noreferrer noopener">Apple Books</a>\n<a href="${a}" target="_blank" rel="noreferrer noopener">Barnes and Noble</a>`}let d;let c={id:[]};const s=new(0,n.BookAPI),{save:l,load:u}=i,p=document.querySelector('[data-action="booksContainer"]'),b=document.querySelector(".js-backdrop"),h=document.querySelector('[data-action="popup-data-markup"]'),m=document.querySelector(".close-popup"),g=document.querySelector(".add-book-button"),f=document.querySelector(".remove-book-button"),v=document.querySelector(".remove-book-text");function k(e){e?(f.removeAttribute("hidden"),v.removeAttribute("hidden")):g.removeAttribute("hidden")}function y(){window.removeEventListener("keydown",w),document.body.classList.remove("show-popup"),g.setAttribute("hidden",!0),f.setAttribute("hidden",!0),v.setAttribute("hidden",!0)}function w(e){"Escape"===e.code&&y()}p.addEventListener("click",(async function(e){if(e.preventDefault(),e.currentTarget===e.target)return;if("see-more-btn"===e.target.dataset.role)return;try{d=e.target.closest(".book-card").dataset.id,s.id=d;const{book_image:t,title:r,author:o,description:n,buy_links:i}=await s.getBooksById();h.innerHTML=a(t,r,o,n,i[0].url,i[1].url,i[2].url),c=u("booksInShopingList")||{id:[]},c.id.includes(d)?k(!0):k(!1),window.addEventListener("keydown",w),document.body.classList.add("show-popup")}catch{}})),b.addEventListener("click",(function(e){e.currentTarget===e.target&&y()})),m.addEventListener("click",y),g.addEventListener("click",(function(){c.id.push(d),l("booksInShopingList",c),g.setAttribute("hidden",!0),f.removeAttribute("hidden"),v.removeAttribute("hidden")})),f.addEventListener("click",(function(){const e=c.id.filter((e=>e!==d));c.id=e,l("booksInShopingList",c),f.setAttribute("hidden",!0),v.setAttribute("hidden",!0),g.removeAttribute("hidden")}));
//# sourceMappingURL=index.252f5c92.js.map
