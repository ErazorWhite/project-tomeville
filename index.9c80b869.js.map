{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-34e898b10f7ac65a.js","src/js/popup.js","src/js/localStorage.js","node_modules/@parcel/runtime-js/lib/runtime-c7ae033f33b73b65.js","node_modules/@parcel/runtime-js/lib/runtime-c8419be573b9f404.js","node_modules/@parcel/runtime-js/lib/runtime-0e30510a89b6eace.js","node_modules/@parcel/runtime-js/lib/runtime-318a8924882720fb.js","node_modules/@parcel/runtime-js/lib/runtime-af1b1fcd5f5b7b27.js","node_modules/@parcel/runtime-js/lib/runtime-e51fe94075df3b38.js","src/js/createMarkupModal.js","node_modules/@parcel/runtime-js/lib/runtime-cc789150ac62529b.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"dRFTD\\\":\\\"index.9c80b869.js\\\",\\\"9c1dv\\\":\\\"noImage-desk@1x.1332fa8f.png\\\",\\\"itRYJ\\\":\\\"image-1@1x.626c9508.png\\\",\\\"hLmfu\\\":\\\"image-1@2x.104a65be.png\\\",\\\"iyNay\\\":\\\"image-2@1x.652b354e.png\\\",\\\"8x2dm\\\":\\\"image-2@2x.15632d7d.png\\\",\\\"ep89d\\\":\\\"image-3@1x.e377c706.png\\\",\\\"ef2uk\\\":\\\"image-3@2x.62451a44.png\\\"}\"));","import { BookAPI } from './bookAPI';\nimport storage from './localStorage';\nimport { createBookMarkup } from './createMarkupModal';\n\nlet BOOK_ID;\nconst KEY_LS = 'booksInShopingList';\nlet BOOKS_IDS = {\n  id: [],\n};\nconst api = new BookAPI();\nconst { save, load } = storage;\n\nconst booksContainerEl = document.querySelector(\n  '[data-action=\"booksContainer\"]'\n);\nconst backdropEl = document.querySelector('.js-backdrop');\nconst markDataContainerEl = document.querySelector(\n  '[data-action=\"popup-data-markup\"]'\n);\nconst closePopupBtnEl = document.querySelector('.close-popup');\nconst addBookBtnEl = document.querySelector('.add-book-button');\nconst removeBookBtnEl = document.querySelector('.remove-book-button');\nconst removeBookTextEl = document.querySelector('.remove-book-text');\n\nbooksContainerEl.addEventListener('click', onBooksContainerClick);\nbackdropEl.addEventListener('click', onBackdropClick);\nclosePopupBtnEl.addEventListener('click', onCloseBtnClick);\naddBookBtnEl.addEventListener('click', onAddBookBtnClick);\nremoveBookBtnEl.addEventListener('click', onRemoveBookBtnClick);\n\nasync function onBooksContainerClick(e) {\n  e.preventDefault();\n  if (e.currentTarget === e.target) {\n    return;\n  }\n  if (e.target.dataset.role === 'see-more-btn') {\n    return;\n  }\n  try {\n    // Тут робимо запит і передаємо данні на відмальовку у функцію\n    BOOK_ID = e.target.closest('.book-card').dataset.id;\n    api.id = BOOK_ID;\n    const { book_image, title, author, description, buy_links } =\n      await api.getBooksById();\n    markDataContainerEl.innerHTML = createBookMarkup(\n      book_image,\n      title,\n      author,\n      description,\n      buy_links[0].url,\n      buy_links[1].url,\n      buy_links[2].url\n    );\n\n    // Звертаємося до локалки і перевіряємо наявність книжки, в залеж. від відповіді виводим кнопку\n    // додати або видалити\n    BOOKS_IDS = load(KEY_LS) || {\n      id: [],\n    };\n    if (BOOKS_IDS.id.includes(BOOK_ID)) {\n      showAddOrRemoveBtn(true);\n    } else {\n      showAddOrRemoveBtn(false);\n    }\n\n    window.addEventListener('keydown', onEscPress);\n    document.body.classList.add('show-popup');\n  } catch {\n    err => console.log(err.message);\n  }\n}\n\n// Показуємо кнопку в залежності від значення флажка true or false.\nfunction showAddOrRemoveBtn(bookInLs) {\n  if (bookInLs) {\n    removeBookBtnEl.removeAttribute('hidden');\n    removeBookTextEl.removeAttribute('hidden');\n  } else {\n    addBookBtnEl.removeAttribute('hidden');\n  }\n}\n\nfunction onAddBookBtnClick() {\n  // Записуємо данні в локал сторейдж\n  // Замінюємо кнопку на ремув\n  BOOKS_IDS.id.push(BOOK_ID);\n  save(KEY_LS, BOOKS_IDS);\n\n  addBookBtnEl.setAttribute('hidden', true);\n  removeBookBtnEl.removeAttribute('hidden');\n  removeBookTextEl.removeAttribute('hidden');\n}\n\nfunction onRemoveBookBtnClick() {\n  // Видаляємо дані з локалки\n  // Замінюємо кнопку на едд\n  const newArrr = BOOKS_IDS.id.filter(item => item !== BOOK_ID);\n  BOOKS_IDS.id = newArrr;\n  save(KEY_LS, BOOKS_IDS);\n  removeBookBtnEl.setAttribute('hidden', true);\n  removeBookTextEl.setAttribute('hidden', true);\n  addBookBtnEl.removeAttribute('hidden');\n}\n\nfunction onCloseBtnClick() {\n  window.removeEventListener('keydown', onEscPress);\n  document.body.classList.remove('show-popup');\n\n  addBookBtnEl.setAttribute('hidden', true);\n  removeBookBtnEl.setAttribute('hidden', true);\n  removeBookTextEl.setAttribute('hidden', true);\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseBtnClick();\n  }\n}\n\nfunction onEscPress(e) {\n  if (e.code === 'Escape') {\n    onCloseBtnClick();\n  }\n}\n\nexport { BOOKS_IDS };\n","// Файлик для работы с локальным хранилищем\n\n// Использовать вот так\n// import storage from './storage';\n// const { save, load } = storage;\n// save(CONST_ID, data); // Запись в local storage\n// const playerNewTime = load(CONST_ID); // Чтение\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst clear = () => {\n  try {\n    localStorage.clear();\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n  clear,\n};\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9c1dv\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"itRYJ\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hLmfu\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"iyNay\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8x2dm\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ep89d\")).toString();","import noImg from '../images/noImage/noImage-desk@1x.png';\nimport imgAmaz1x from '../images/modal/image-1@1x.png';\nimport imgAmaz2x from '../images/modal/image-1@2x.png';\nimport imgApBooks1x from '../images/modal/image-2@1x.png';\nimport imgApBooks2x from '../images/modal/image-2@2x.png';\nimport imgBarnAndNob1x from '../images/modal/image-3@1x.png';\nimport imgBarnAndNob2x from '../images/modal/image-3@2x.png';\n\nexport function createBookMarkup(\n  bookImg,\n  title,\n  author,\n  description,\n  urlAmaz,\n  urlApBooks,\n  urlBarnAndNob\n) {\n  return `<div class=\"popup-box-img\"><img src=\"${\n    bookImg || noImg\n  }\" alt=\"book cover: ${title || 'No title'}\" class=\"popup-img\"></div>\n<div class=\"popup-text\">\n    <h2 class=\"popup-title\">${title || 'No title'}</h2>\n    <p class=\"popup-author\">${author || 'No author'}</p>\n    <p class=\"popup-description\">${description || 'No description'}</p>\n    <div class=\"popup-img-links\">\n        <a href=\"${urlAmaz}\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\">\n            <img srcset=\"${imgAmaz1x} 1x, ${imgAmaz2x} 2x\" src=\"${imgAmaz1x}\" alt=\"Amazon shop\" width=\"62\"\n                height=\"19\" />\n        </a>\n        <a href=\"${urlApBooks}\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\"><img\n                srcset=\"${imgApBooks1x} 1x, ${imgApBooks2x} 2x\" src=\"${imgApBooks1x}\" alt=\"Apple Books shop\" width=\"33\"\n                height=\"32\" /></a>\n        <a href=\"${urlBarnAndNob}\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\"><img\n                srcset=\"${imgBarnAndNob1x} 1x, ${imgBarnAndNob2x} 2x\" src=\"${imgBarnAndNob1x}\"\n                alt=\"Barnes and Noble shop\" width=\"38\" height=\"36\" /></a>\n    </div>\n</div>`;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ef2uk\")).toString();"],"names":["parcelRequire","register","JSON","parse","$hkoFk","$2338c8cd734f85a6$export$2e2bcd8739ae039","key","value","serializedState","stringify","localStorage","setItem","error","console","message","getItem","undefined","removeItem","clear","$76213256ab40339f$exports","URL","resolve","import","meta","url","toString","$9fd2e1988418f547$exports","$81415a7b33488f8a$exports","$06731b6f9ebbeea6$exports","$16275b52ea1c3259$exports","$00756601baa23334$exports","$7a2a395e5a90914a$export$fc330cc8afb2a391","bookImg","title","author","description","urlAmaz","urlApBooks","urlBarnAndNob","$parcel$interopDefault","$5a6da73d99be9488$exports","$8eba2bb3fe686d91$var$BOOK_ID","$8eba2bb3fe686d91$export$1381f8da19e39170","id","$8eba2bb3fe686d91$var$api","BookAPI","save","$8eba2bb3fe686d91$var$save","load","$8eba2bb3fe686d91$var$load","$8eba2bb3fe686d91$var$booksContainerEl","document","querySelector","$8eba2bb3fe686d91$var$backdropEl","$8eba2bb3fe686d91$var$markDataContainerEl","$8eba2bb3fe686d91$var$closePopupBtnEl","$8eba2bb3fe686d91$var$addBookBtnEl","$8eba2bb3fe686d91$var$removeBookBtnEl","$8eba2bb3fe686d91$var$removeBookTextEl","$8eba2bb3fe686d91$var$showAddOrRemoveBtn","bookInLs","removeAttribute","$8eba2bb3fe686d91$var$onCloseBtnClick","window","removeEventListener","$8eba2bb3fe686d91$var$onEscPress","body","classList","remove","setAttribute","e","code","addEventListener","async","preventDefault","currentTarget","target","dataset","role","closest","book_image","buy_links","getBooksById","innerHTML","includes","add","push","newArrr","filter","item"],"version":3,"file":"index.9c80b869.js.map"}