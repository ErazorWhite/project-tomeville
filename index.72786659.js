!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequire3c29;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire3c29=o),o("iE7OH").register(JSON.parse('{"lCRWP":"index.72786659.js","lVjcj":"noImage-desk@1x.1332fa8f.png","1alCl":"image-1@1x.626c9508.png","3Tr0J":"image-1@2x.104a65be.png","2t8gc":"image-2@1x.652b354e.png","cQxLU":"image-2@2x.15632d7d.png","k3dFm":"image-3@1x.e377c706.png","dNbsd":"image-3@2x.62451a44.png"}'));var a,c=o("bpxeT"),i=o("2TvXO"),s=o("2PuEF"),d={save:function(e,t){try{var r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.error("Set state error: ",e.message)}},load:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:function(e){try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}},clear:function(){try{localStorage.clear()}catch(e){console.error("Get state error: ",e.message)}}};a=o("aNJCr").getBundleURL("lCRWP")+o("iE7OH").resolve("lVjcj");var l;l=o("aNJCr").getBundleURL("lCRWP")+o("iE7OH").resolve("1alCl");var u;u=o("aNJCr").getBundleURL("lCRWP")+o("iE7OH").resolve("3Tr0J");var p;p=o("aNJCr").getBundleURL("lCRWP")+o("iE7OH").resolve("2t8gc");var g;g=o("aNJCr").getBundleURL("lCRWP")+o("iE7OH").resolve("cQxLU");var b;b=o("aNJCr").getBundleURL("lCRWP")+o("iE7OH").resolve("k3dFm");var v,f;function m(t,r,n,o,c,i,s){return'<div class="popup-box-img"><img src="'.concat(t||e(a),'" alt="book cover: ').concat(r||"No title",'" class="popup-img"></div>\n<div class="popup-text">\n    <h2 class="popup-title">').concat(r||"No title",'</h2>\n    <p class="popup-author">').concat(n||"No author",'</p>\n    <p class="popup-description">').concat(o||"No description",'</p>\n    <div class="popup-img-links">\n        <a href="').concat(c,'" class="popup-link" target="_blank" rel="noreferrer noopener">\n            <img srcset="').concat(e(l)," 1x, ").concat(e(u),' 2x" src="').concat(e(l),'" alt="Amazon shop" width="62"\n                height="19" />\n        </a>\n        <a href="').concat(i,'" class="popup-link" target="_blank" rel="noreferrer noopener"><img\n                srcset="').concat(e(p)," 1x, ").concat(e(g),' 2x" src="').concat(e(p),'" alt="Apple Books shop" width="33"\n                height="32" /></a>\n        <a href="').concat(s,'" class="popup-link" target="_blank" rel="noreferrer noopener"><img\n                srcset="').concat(e(b)," 1x, ").concat(e(v),' 2x" src="').concat(e(b),'"\n                alt="Barnes and Noble shop" width="38" height="36" /></a>\n    </div>\n</div>')}v=o("aNJCr").getBundleURL("lCRWP")+o("iE7OH").resolve("dNbsd");var h="booksInShopingList",k={id:[]},x=new(0,s.BookAPI),E=d.save,H=d.load,R=document.querySelector('[data-action="booksContainer"]'),_=document.querySelector(".js-backdrop"),y=document.querySelector('[data-action="popup-data-markup"]'),S=document.querySelector(".close-popup"),A=document.querySelector(".add-book-button"),L=document.querySelector(".remove-book-button"),w=document.querySelector(".remove-book-text");function C(){return(C=e(c)(e(i).mark((function t(r){var n,o,a,c,s,d;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),r.currentTarget!==r.target){e.next=3;break}return e.abrupt("return");case 3:if("see-more-btn"!==r.target.dataset.role){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,f=r.target.closest(".book-card").dataset.id,x.id=f,e.next=10,x.getBooksById();case 10:n=e.sent,o=n.book_image,a=n.title,c=n.author,s=n.description,d=n.buy_links,y.innerHTML=m(o,a,c,s,d[0].url,d[1].url,d[2].url),(k=H(h)||{id:[]}).id.includes(f)?N(!0):N(!1),window.addEventListener("keydown",B),document.body.classList.add("show-popup"),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5);case 26:case"end":return e.stop()}}),t,null,[[5,23]])})))).apply(this,arguments)}function N(e){e?(L.removeAttribute("hidden"),w.removeAttribute("hidden")):A.removeAttribute("hidden")}function O(){window.removeEventListener("keydown",B),document.body.classList.remove("show-popup"),A.setAttribute("hidden",!0),L.setAttribute("hidden",!0),w.setAttribute("hidden",!0)}function B(e){"Escape"===e.code&&O()}R.addEventListener("click",(function(e){return C.apply(this,arguments)})),_.addEventListener("click",(function(e){e.currentTarget===e.target&&O()})),S.addEventListener("click",O),A.addEventListener("click",(function(){k.id.push(f),E(h,k),A.setAttribute("hidden",!0),L.removeAttribute("hidden"),w.removeAttribute("hidden")})),L.addEventListener("click",(function(){var e=k.id.filter((function(e){return e!==f}));k.id=e,E(h,k),L.setAttribute("hidden",!0),w.setAttribute("hidden",!0),A.removeAttribute("hidden")}))}();
//# sourceMappingURL=index.72786659.js.map
