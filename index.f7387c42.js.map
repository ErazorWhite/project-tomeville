{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-a504d8d12f8a4b7a.js","src/js/bestSellerBooks.js","src/js/renderMarkup.js","node_modules/@parcel/runtime-js/lib/runtime-a0e2a56fcf445a45.js","src/js/popup.js","src/js/localStorage.js","node_modules/@parcel/runtime-js/lib/runtime-8c3be383c36c237c.js","node_modules/@parcel/runtime-js/lib/runtime-203f121ff89f420d.js","node_modules/@parcel/runtime-js/lib/runtime-830079bf11ce7b13.js","node_modules/@parcel/runtime-js/lib/runtime-72c2698ff0ec3db5.js","node_modules/@parcel/runtime-js/lib/runtime-ad53e9c760877d04.js","src/js/createMarkupModal.js","node_modules/@parcel/runtime-js/lib/runtime-09cbf8160515a0c2.js","src/js/renderCategories.js","src/js/renderBooksByCategory.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.f7387c42.js\\\",\\\"lVjcj\\\":\\\"noImage-desk@1x.1332fa8f.png\\\",\\\"1alCl\\\":\\\"image-1@1x.626c9508.png\\\",\\\"3Tr0J\\\":\\\"image-1@2x.104a65be.png\\\",\\\"2t8gc\\\":\\\"image-2@1x.652b354e.png\\\",\\\"cQxLU\\\":\\\"image-2@2x.15632d7d.png\\\",\\\"k3dFm\\\":\\\"image-3@1x.e377c706.png\\\",\\\"dNbsd\\\":\\\"image-3@2x.62451a44.png\\\",\\\"fFNaz\\\":\\\"index.05b2db46.js\\\"}\"));","import { BookAPI } from './bookAPI';\nimport { renderBsBookCardsMarkup } from './renderMarkup';\nimport { Notify } from 'notiflix';\nimport { spinerStart, spinerStop } from './spinner';\n\nconst bsBooksSectionEl = document.querySelector('.js-bs-books__section');\n\nfunction onSeeMore(e) {\n  const seeMoreBtnDataRole = e.target.getAttribute('data-role');\n  if (!seeMoreBtnDataRole || seeMoreBtnDataRole !== 'see-more-btn') return;\n\n  const targetCategory = e.target.getAttribute('data-list');\n  const targetCategoryNavTabEl = document.querySelector(\n    `[data-category=\"${targetCategory}\"]`\n  );\n\n  targetCategoryNavTabEl.dispatchEvent(new Event('click'));\n}\n\nbsBooksSectionEl.addEventListener('click', onSeeMore);\n\nexport async function renderBestSellerBooks() {\n  spinerStart();\n  const api = new BookAPI();\n\n  const bestSellersBooksList = document.querySelector(\n    '.bs-books__categories-list'\n  );\n\n  const resp = await api.getTopBooks();\n  if (resp.length == 0) {\n    Notify.failure('There are no books, sorry.');\n    return;\n  }\n\n  renderBsBookCardsMarkup(resp);\n  bestSellersBooksList.insertAdjacentHTML(\n    'beforeend',\n    renderBsBookCardsMarkup(resp)\n  );\n  spinerStop();\n}\n\nrenderBestSellerBooks();\n","import noImg from '../images/noImage/noImage-desk@1x.png';\n\nexport function renderBsBookCardsMarkup(bestBooksList) {\n  const markup = bestBooksList\n    .map(\n      ({ list_name, books }) => `\n      <li class=\"bs-books__categories-item\">\n        <h2 class=\"bs-books__category-title\">${list_name}</h2>\n        <ul class=\"bs-books__list\">\n          ${books\n            .map(\n              ({ _id, list_name, author, book_image, title }) => `\n              <li class=\"bs-books__item book-card\" data-id=\"${_id}\">\n              <p class=\"bs-books__category\">${list_name}</p>\n              <a class=\"bs-books__link\" href=\"#\">\n                  <div class=\"bs-books__thumb\">\n                      <img src=\"${book_image || noImg}\" alt=\"book cover: ${\n                title || 'No title'\n              }\"class=\"bs-books__picture\" width=\"335\" height=\"485\">\n                      <p class=\"bs-books__view\">quick view</p>\n                  </div>\n                  <div class=\"bs-books__box\">\n                  <h3 class=\"bs-books__title\">${title || 'No title'}</h3>\n                  <p class=\"bs-books__author\">${author || 'No author'}</p>\n                  </div>\n                  </a>\n                  <div class=\"bs-books__button-box\">\n                    <button class=\"bs-books__see-more-btn\" type=\"button\" data-role=\"see-more-btn\" data-list=\"${list_name}\">see more</button>\n                  </div>\n              </li>`\n            )\n            .join('')}\n        </ul>\n      </li>`\n    )\n    .join('');\n  return markup;\n}\n\nexport const bestSellersInitMarkup = `<h1 class=\"bs-books__headline\">Best Sellers <span class=\"bs-books__accent\">Books</span></h1>\n        <ul class=\"bs-books__categories-list\" data-action=\"booksContainer\">\n        </ul>`;\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"lVjcj\");","import { BookAPI } from './bookAPI';\nimport storage from './localStorage';\nimport { createBookMarkup } from './createMarkupModal';\nimport * as bodyScrollLock from 'body-scroll-lock';\n\nlet BOOK_ID;\nconst KEY_LS = 'booksInShopingList';\nlet BOOKS_IDS = {\n  id: [],\n};\nconst api = new BookAPI();\nconst { save, load } = storage;\nlet scrollLockMethod;\n\nlet booksContainerEl = document.querySelector('[data-action=\"booksContainer\"]');\n\nlet backdropEl = document.querySelector('.js-backdrop');\nlet markDataContainerEl = document.querySelector(\n  '[data-action=\"popup-data-markup\"]'\n);\nlet closePopupBtnEl = document.querySelector('.close-popup');\nlet addBookBtnEl = document.querySelector('.add-book-button');\nlet removeBookBtnEl = document.querySelector('.remove-book-button');\nlet removeBookTextEl = document.querySelector('.remove-book-text');\n\nexport function refreshPopupDOM() {\n  booksContainerEl = document.querySelector('[data-action=\"booksContainer\"]');\n\n  backdropEl = document.querySelector('.js-backdrop');\n  markDataContainerEl = document.querySelector(\n    '[data-action=\"popup-data-markup\"]'\n  );\n  closePopupBtnEl = document.querySelector('.close-popup');\n  addBookBtnEl = document.querySelector('.add-book-button');\n  removeBookBtnEl = document.querySelector('.remove-book-button');\n  removeBookTextEl = document.querySelector('.remove-book-text');\n\n  addEventListeners();\n}\n\naddEventListeners();\n\nfunction addEventListeners() {\n  booksContainerEl.addEventListener('click', onBooksContainerClick);\n  backdropEl.addEventListener('click', onBackdropClick);\n  closePopupBtnEl.addEventListener('click', onCloseBtnClick);\n  addBookBtnEl.addEventListener('click', onAddBookBtnClick);\n  removeBookBtnEl.addEventListener('click', onRemoveBookBtnClick);\n}\n\nasync function onBooksContainerClick(e) {\n  e.preventDefault();\n  if (e.currentTarget === e.target) {\n    return;\n  }\n  if (e.target.dataset.role === 'see-more-btn') {\n    return;\n  }\n  try {\n    // Тут робимо запит і передаємо данні на відмальовку у функцію\n    BOOK_ID = e.target.closest('.book-card').dataset.id;\n    api.id = BOOK_ID;\n    const { book_image, title, author, description, buy_links } =\n      await api.getBooksById();\n    markDataContainerEl.innerHTML = createBookMarkup(\n      book_image,\n      title,\n      author,\n      description,\n      buy_links[0].url,\n      buy_links[1].url,\n      buy_links[2].url\n    );\n\n    // Звертаємося до локалки і перевіряємо наявність книжки, в залеж. від відповіді виводим кнопку\n    // додати або видалити\n    BOOKS_IDS = load(KEY_LS) || {\n      id: [],\n    };\n    if (BOOKS_IDS.id.includes(BOOK_ID)) {\n      showAddOrRemoveBtn(true);\n    } else {\n      showAddOrRemoveBtn(false);\n    }\n\n    window.addEventListener('keydown', onEscPress);\n    document.body.classList.add('show-popup');\n\n    const isMenuOpen = false;\n    scrollLockMethod = !isMenuOpen ? 'disableBodyScroll' : 'enableBodyScroll';\n    bodyScrollLock[scrollLockMethod](document.body);\n  } catch {\n    err => console.log(err.message);\n  }\n}\n\n// Показуємо кнопку в залежності від значення флажка true or false.\nfunction showAddOrRemoveBtn(bookInLs) {\n  if (bookInLs) {\n    removeBookBtnEl.removeAttribute('hidden');\n    removeBookTextEl.removeAttribute('hidden');\n  } else {\n    addBookBtnEl.removeAttribute('hidden');\n  }\n}\n\nfunction onAddBookBtnClick() {\n  // Записуємо данні в локал сторейдж\n  // Замінюємо кнопку на ремув\n  BOOKS_IDS.id.push(BOOK_ID);\n  save(KEY_LS, BOOKS_IDS);\n\n  addBookBtnEl.setAttribute('hidden', true);\n  removeBookBtnEl.removeAttribute('hidden');\n  removeBookTextEl.removeAttribute('hidden');\n}\n\nfunction onRemoveBookBtnClick() {\n  // Видаляємо дані з локалки\n  // Замінюємо кнопку на едд\n  const newArrr = BOOKS_IDS.id.filter(item => item !== BOOK_ID);\n  BOOKS_IDS.id = newArrr;\n  save(KEY_LS, BOOKS_IDS);\n  removeBookBtnEl.setAttribute('hidden', true);\n  removeBookTextEl.setAttribute('hidden', true);\n  addBookBtnEl.removeAttribute('hidden');\n}\n\nfunction onCloseBtnClick() {\n  window.removeEventListener('keydown', onEscPress);\n  document.body.classList.remove('show-popup');\n  bodyScrollLock.enableBodyScroll(document.body);\n\n  addBookBtnEl.setAttribute('hidden', true);\n  removeBookBtnEl.setAttribute('hidden', true);\n  removeBookTextEl.setAttribute('hidden', true);\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseBtnClick();\n  }\n}\n\nfunction onEscPress(e) {\n  if (e.code === 'Escape') {\n    onCloseBtnClick();\n  }\n}\n","// Файлик для работы с локальным хранилищем\n\n// Использовать вот так\n// import storage from './storage';\n// const { save, load } = storage;\n// save(CONST_ID, data); // Запись в local storage\n// const playerNewTime = load(CONST_ID); // Чтение\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst clear = () => {\n  try {\n    localStorage.clear();\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n  clear,\n};\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"1alCl\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"3Tr0J\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"2t8gc\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"cQxLU\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"k3dFm\");","import noImg from '../images/noImage/noImage-desk@1x.png';\nimport imgAmaz1x from '../images/modal/image-1@1x.png';\nimport imgAmaz2x from '../images/modal/image-1@2x.png';\nimport imgApBooks1x from '../images/modal/image-2@1x.png';\nimport imgApBooks2x from '../images/modal/image-2@2x.png';\nimport imgBarnAndNob1x from '../images/modal/image-3@1x.png';\nimport imgBarnAndNob2x from '../images/modal/image-3@2x.png';\n\nexport function createBookMarkup(\n  bookImg,\n  title,\n  author,\n  description,\n  urlAmaz,\n  urlApBooks,\n  urlBarnAndNob\n) {\n  return `<div class=\"popup-box-img\"><img src=\"${\n    bookImg || noImg\n  }\" alt=\"book cover: ${title || 'No title'}\" class=\"popup-img\"></div>\n<div class=\"popup-text\">\n    <h2 class=\"popup-title\">${title || 'No title'}</h2>\n    <p class=\"popup-author\">${author || 'No author'}</p>\n    <p class=\"popup-description\">${description || 'No description'}</p>\n    <div class=\"popup-img-links\">\n        <a href=\"${\n          urlAmaz || 'https://www.kualo.co.uk/404'\n        }\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\">\n            <img srcset=\"${imgAmaz1x} 1x, ${imgAmaz2x} 2x\" src=\"${imgAmaz1x}\" alt=\"Amazon shop\" width=\"62\"\n                height=\"19\" />\n        </a>\n        <a href=\"${\n          urlApBooks || 'https://www.kualo.co.uk/404'\n        }\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\"><img\n                srcset=\"${imgApBooks1x} 1x, ${imgApBooks2x} 2x\" src=\"${imgApBooks1x}\" alt=\"Apple Books shop\" width=\"33\"\n                height=\"32\" /></a>\n        <a href=\"${\n          urlBarnAndNob || 'https://www.kualo.co.uk/404'\n        }\" class=\"popup-link\" target=\"_blank\" rel=\"noreferrer noopener\"><img\n                srcset=\"${imgBarnAndNob1x} 1x, ${imgBarnAndNob2x} 2x\" src=\"${imgBarnAndNob1x}\"\n                alt=\"Barnes and Noble shop\" width=\"38\" height=\"36\" /></a>\n    </div>\n</div>`;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"dNbsd\");","import { BookAPI } from './bookAPI';\nimport {\n  displayBooksByCategory,\n  booksByCategoryInitMarkup,\n} from './renderBooksByCategory';\nimport { renderBestSellerBooks } from './bestSellerBooks';\nimport { bestSellersInitMarkup } from './renderMarkup';\nimport { refreshPopupDOM } from './popup';\n\nlet currentCategory = null; // Змінна для зберігання посилання на поточний елемент категорії\nlet allCategoriesEl = null;\nconst booksByCategoriesSectionEl = document.querySelector(\n  '.js-books-container'\n);\nconst bestSellerBooksSectionEl = document.querySelector('.bs-books__section');\n\n// Функція для отримання та відображення категорій книг\nasync function displayBookCategories() {\n  const bookAPI = new BookAPI();\n  const categoriesList = document.querySelector('.categories-list');\n\n  try {\n    // Отримання списку об'єктів категорій книг з BookAPI\n    const response = await bookAPI.getCategoryList();\n    const categories = response.map(item => item.list_name);\n\n    // Сортування категорій в алфавітному порядку\n    categories.sort();\n\n    // Створення розмітки категорій\n    const markup = categories\n      .map(\n        category =>\n          `<li class=\"categories-item\" data-category=\"${category}\">${category}</li>`\n      )\n      .join('');\n\n    // Додавання розмітки до <ul> з початковим елементом\n    categoriesList.innerHTML = `<li class=\"categories-item current_category\" data-category=\"All categories\">All categories</li>${markup}`;\n    allCategoriesEl = document.querySelector(\n      'li.categories-item[data-category=\"All categories\"]'\n    );\n    currentCategory = allCategoriesEl;\n\n    // Додаємо обробник подій кліку до кожного елемента категорії\n    const categoryItems = document.querySelectorAll('.categories-item');\n    categoryItems.forEach(item => {\n      item.addEventListener('click', handleCategoryClick);\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// Виклик функції для відображення категорій книг\ndisplayBookCategories();\n\n// Функція, яка буде викликатися при кліку на елемент категорії\nfunction handleCategoryClick(event) {\n  // Перевіряємо, чи був клік на іншому елементі категорії\n  if (currentCategory !== event.target) {\n    // Видаляємо клас \"current_category\" з попереднього поточного елемента\n    if (currentCategory) {\n      currentCategory.classList.remove('current_category');\n    }\n\n    // Додаємо клас \"current_category\" до нового поточного елемента\n    event.target.classList.add('current_category');\n\n    // Зберігаємо посилання на новий поточний елемент\n    currentCategory = event.target;\n\n    const category = event.target.dataset.category;\n\n    // Викликаємо функцію для відображення книг за обраною категорією\n\n    document.querySelector('.js-bs-books__section').innerHTML = '';\n    if (event.target == allCategoriesEl) {\n      hideSection(booksByCategoriesSectionEl);\n      bestSellerBooksSectionEl.style.display = '';\n      bestSellerBooksSectionEl.innerHTML = bestSellersInitMarkup;\n\n      renderBestSellerBooks();\n      refreshPopupDOM();\n    } else {\n      hideSection(bestSellerBooksSectionEl);\n      booksByCategoriesSectionEl.style.display = '';\n      booksByCategoriesSectionEl.innerHTML = booksByCategoryInitMarkup;\n\n      displayBooksByCategory(category);\n      refreshPopupDOM();\n    }\n  }\n}\n\nexport function hideSection(sectionEl) {\n  sectionEl.innerHTML = '';\n  sectionEl.style.display = 'none';\n}\n","import { BookAPI } from './bookAPI';\nimport { spinerStart, spinerStop } from './spinner';\n\nexport async function displayBooksByCategory(category) {\n  spinerStart();\n  const bookAPI = new BookAPI();\n  const booksContainer = document.querySelector('.js-books-container');\n  const categoryTitle = booksContainer.querySelector('.js-category-title');\n  const bookList = booksContainer.querySelector('.js-book-list');\n\n  try {\n    const books = await bookAPI.getBooksByCategory(category);\n\n    // Обмежуємо кількість книг до 20\n    const limitedBooks = books.slice(0, 20);\n\n    // Створюємо розмітку для кожної книги\n    const markup = limitedBooks\n      .map(book => {\n        return `\n      <li class=\"book-card bs-books__item\" data-id='${book._id}'>\n      <a class=\"bs-books__link\" href=\"#\">\n      <div class=\"bs-books__thumb\">\n        <img class=\"bs-books__picture\" src=\"${book.book_image}\" alt=\"${\n          book.author\n        } ${book.title}\" loading=\"lazy\">\n      <p class=\"bs-books__view\">quick view</p>\n        </div>\n      <div class=\"bs-books__box\">\n      <h3 class=\"bs-books__title\">${book.title || 'No title'}</h3>\n      <p class=\"bs-books__author\">${book.author || 'No author'}</p>\n        </div>\n        </a>\n    </li>`;\n      })\n      .join('');\n\n    // Оновлення заголовка з обраною категорією\n\n    categoryTitle.textContent = category;\n\n    const array = categoryTitle.textContent.split(' ');\n    const lastElement = array[array.length - 1];\n\n    array.pop();\n\n    const updatedTitle = array.join(' ');\n\n    categoryTitle.textContent = updatedTitle;\n\n    // titleLastWord.textContent = lastElement;\n\n    const span = document.createElement('span');\n    span.textContent = ` ${lastElement}`;\n    // console.log(span.textContent);\n\n    const accentLastWord = categoryTitle.appendChild(span);\n    accentLastWord.classList.add('bs-books__accent');\n    // console.log(titleLastWord.textContent);\n\n    // Додаємо розмітку до контейнера з книгами\n    bookList.innerHTML = markup;\n  } catch (error) {\n    console.error(error);\n  }\n  spinerStop();\n}\n\nexport const booksByCategoryInitMarkup = `<h1 class=\"js-category-title bs-books__headline\"></h1>\n  <ul class=\"js-book-list books__list\" data-action=\"booksContainer\"></ul>`;"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$3a6dece2d99f3b9c$export$2191c5679916e4f6","bestBooksList","map","param1","list_name1","list_name","books","concat","param","_id","author","book_image","title","$parcel$interopDefault","$6c91f5da6206e864$exports","join","getBundleURL","resolve","$4905b2278ba70a9b$export$7c77a3787b3a4ce0","$4905b2278ba70a9b$var$_renderBestSellerBooks","apply","this","arguments","$2TvXO","mark","_callee","api","bestSellersBooksList","resp","$j1lrD","spinerStart","$2PuEF","BookAPI","document","querySelector","getTopBooks","_ctx","sent","length","$6JpON","Notify","failure","insertAdjacentHTML","spinerStop","addEventListener","e","seeMoreBtnDataRole","target","getAttribute","targetCategory","dispatchEvent","Event","$0aa9cd13c14a6e1e$export$2e2bcd8739ae039","save","key","value","serializedState","stringify","localStorage","setItem","error","console","message","load","getItem","undefined","remove","removeItem","clear","$3e61f659607a5761$exports","$86de4082452e37a4$exports","$2036430103aa4ff9$exports","$cf73d52565b603cb$exports","$53d6c47d8de94648$exports","$fb41cd2eb6955eb4$export$fc330cc8afb2a391","bookImg","description","urlAmaz","urlApBooks","urlBarnAndNob","$279e852c3bca9e61$exports","$fed5289f9aa3b6b0$var$BOOK_ID","$fed5289f9aa3b6b0$var$KEY_LS","$fed5289f9aa3b6b0$var$BOOKS_IDS","id","$fed5289f9aa3b6b0$var$api","$fed5289f9aa3b6b0$var$save","$fed5289f9aa3b6b0$var$load","$fed5289f9aa3b6b0$var$booksContainerEl","$fed5289f9aa3b6b0$var$backdropEl","$fed5289f9aa3b6b0$var$markDataContainerEl","$fed5289f9aa3b6b0$var$closePopupBtnEl","$fed5289f9aa3b6b0$var$addBookBtnEl","$fed5289f9aa3b6b0$var$removeBookBtnEl","$fed5289f9aa3b6b0$var$removeBookTextEl","$fed5289f9aa3b6b0$export$c1840df5536bfbea","$fed5289f9aa3b6b0$var$addEventListeners","$fed5289f9aa3b6b0$var$onBooksContainerClick","$fed5289f9aa3b6b0$var$onBackdropClick","$fed5289f9aa3b6b0$var$onCloseBtnClick","$fed5289f9aa3b6b0$var$onAddBookBtnClick","$fed5289f9aa3b6b0$var$onRemoveBookBtnClick","$fed5289f9aa3b6b0$var$_onBooksContainerClick","ref","buy_links","preventDefault","currentTarget","dataset","role","closest","getBooksById","innerHTML","url","includes","$fed5289f9aa3b6b0$var$showAddOrRemoveBtn","window","$fed5289f9aa3b6b0$var$onEscPress","body","classList","add","$gnsaF","bookInLs","removeAttribute","push","setAttribute","newArrr","filter","item","removeEventListener","enableBodyScroll","code","$6bd263d2d91ddf67$export$dd533af58c47f1e3","category","$6bd263d2d91ddf67$var$_displayBooksByCategory","bookAPI","booksContainer","categoryTitle","bookList","limitedBooks","markup","array","lastElement","updatedTitle","span","getBooksByCategory","slice","book","textContent","split","pop","createElement","appendChild","t0","$7ed053496bcb5dee$var$currentCategory","$7ed053496bcb5dee$var$allCategoriesEl","$7ed053496bcb5dee$var$booksByCategoriesSectionEl","$7ed053496bcb5dee$var$bestSellerBooksSectionEl","$7ed053496bcb5dee$var$_displayBookCategories","categoriesList","response","categories","getCategoryList","sort","querySelectorAll","forEach","$7ed053496bcb5dee$var$handleCategoryClick","event","$7ed053496bcb5dee$export$e0f58372dd4354b2","style","display","sectionEl","$7ed053496bcb5dee$var$displayBookCategories"],"version":3,"file":"index.f7387c42.js.map"}