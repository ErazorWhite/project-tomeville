!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},r=t.parcelRequire3c29;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire3c29=r),r("iE7OH").register(JSON.parse('{"EVgbq":"index.1195f1f9.js","lVjcj":"noImage-desk@1x.1332fa8f.png","fFNaz":"index.58ec9f6e.js"}'));var a,s=r("bpxeT"),c=r("2TvXO"),i=r("2PuEF");function l(t){return t.map((function(t){var o=t.list_name,n=t.books;return'\n      <li class="bs-books__categories-item">\n        <h2 class="bs-books__category-title">'.concat(o,'</h2>\n        <ul class="bs-books__list">\n          ').concat(n.map((function(t){var o=t._id,n=t.list_name,r=t.author,s=t.book_image,c=t.title;return'\n              <li class="bs-books__item book-card" data-id="'.concat(o,'">\n              <p class="bs-books__category">').concat(n,'</p>\n              <a class="bs-books__link" href="#">\n                  <div class="bs-books__thumb">\n                      <img src="').concat(s||e(a),'" alt="book cover: ').concat(c||"No title",'"class="bs-books__picture" width="335" height="485" loading="lazy">\n                      <p class="bs-books__view">quick view</p>\n                  </div>\n                  <div class="bs-books__box">\n                  <h3 class="bs-books__title">').concat(c||"No title",'</h3>\n                  <p class="bs-books__author">').concat(r||"No author",'</p>\n                  </div>\n                  </a>\n                  <div class="bs-books__button-box">\n                    <button class="bs-books__see-more-btn" type="button" data-role="see-more-btn" data-list="').concat(n,'">see more</button>\n                  </div>\n              </li>')})).join(""),"\n        </ul>\n      </li>")})).join("")}a=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("lVjcj");var u=r("6JpON"),d=r("j1lrD");function p(){return b.apply(this,arguments)}function b(){return(b=e(s)(e(c).mark((function t(){var o,n,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.spinerStart)(),o=new(0,i.BookAPI),n=document.querySelector(".bs-books__categories-list"),e.next=5,o.getTopBooks();case 5:if(0!=(r=e.sent).length){e.next=9;break}return u.Notify.failure("There are no books, sorry."),e.abrupt("return");case 9:l(r),n.insertAdjacentHTML("beforeend",l(r)),(0,d.spinerStop)();case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}document.querySelector(".js-bs-books__section").addEventListener("click",(function(e){var t=e.target.getAttribute("data-role");if(t&&"see-more-btn"===t){var o=e.target.getAttribute("data-list");document.querySelector('[data-category="'.concat(o,'"]')).dispatchEvent(new Event("click"))}})),p();s=r("bpxeT"),c=r("2TvXO"),i=r("2PuEF");var k={save:function(e,t){try{var o=JSON.stringify(t);localStorage.setItem(e,o)}catch(e){console.error("Set state error: ",e.message)}},load:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:function(e){try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}},clear:function(){try{localStorage.clear()}catch(e){console.error("Get state error: ",e.message)}}};function m(t,o,n,r,s,c,i){return'<div class="popup-box-img"><img src="'.concat(t||e(a),'" alt="book cover: ').concat(o||"No title",'" class="popup-img"></div>\n<div class="popup-text">\n  <h2 class="popup-title">').concat(o||"No title",'</h2>\n  <p class="popup-author">').concat(n||"No author",'</p>\n  <p class="popup-description">').concat(r||"No description",'</p>\n  <ul class="popup-img-links">\n    <li class="popup-img-links__item">\n      <a href="').concat(s,'" target="_blank" rel="noreferrer noopener">\n        <div class="thumbAmazon popup-amazon-store"></div>\n      </a>\n    </li>\n    <li class="popup-img-links__item">\n      <a href="').concat(c,'" target="_blank" rel="noreferrer noopener">\n        <div class="thumbAppleBook popup-app-book-store"></div>\n      </a>\n    </li>\n    <li class="popup-img-links__item">\n      <a href="').concat(i,'" target="_blank" rel="noreferrer noopener">\n        <div class="thumbBookshop popup-book-store"></div>\n      </a>\n    </li>\n  </ul>\n</div>')}var _,v=r("gnsaF"),g="booksInShopingList",f={id:[]},h=new(0,i.BookAPI),y=k.save,S=k.load,x=document.querySelector('[data-action="booksContainer"]'),w=document.querySelector(".js-backdrop"),q=document.querySelector('[data-action="popup-data-markup"]'),A=document.querySelector(".close-popup"),j=document.querySelector(".add-book-button"),E=document.querySelector(".remove-book-button"),L=document.querySelector(".remove-book-text");function T(){x=document.querySelector('[data-action="booksContainer"]'),w=document.querySelector(".js-backdrop"),q=document.querySelector('[data-action="popup-data-markup"]'),A=document.querySelector(".close-popup"),j=document.querySelector(".add-book-button"),E=document.querySelector(".remove-book-button"),L=document.querySelector(".remove-book-text"),N()}function N(){x.addEventListener("click",B),w.addEventListener("click",I),A.addEventListener("click",F),j.addEventListener("click",O),E.addEventListener("click",M)}function B(e){return H.apply(this,arguments)}function H(){return(H=e(s)(e(c).mark((function t(o){var n,r,a,s,i,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.preventDefault(),o.currentTarget!==o.target){e.next=3;break}return e.abrupt("return");case 3:if("see-more-btn"!==o.target.dataset.role){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,_=o.target.closest(".book-card").dataset.id,h.id=_,e.next=10,h.getBooksById();case 10:n=e.sent,r=n.book_image,a=n.title,s=n.author,i=n.description,l=n.buy_links,q.innerHTML=m(r,a,s,i,l[0].url,l[1].url,l[4].url),(f=S(g)||{id:[]}).id.includes(_)?C(!0):C(!1),window.addEventListener("keydown",P),document.body.classList.add("show-popup"),!1,v["disableBodyScroll"](document.body),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(5);case 29:case"end":return e.stop()}}),t,null,[[5,26]])})))).apply(this,arguments)}function C(e){e?(E.removeAttribute("hidden"),L.removeAttribute("hidden")):j.removeAttribute("hidden")}function O(){f.id.push(_),y(g,f),j.setAttribute("hidden",!0),E.removeAttribute("hidden"),L.removeAttribute("hidden")}function M(){var e=f.id.filter((function(e){return e!==_}));f.id=e,y(g,f),E.setAttribute("hidden",!0),L.setAttribute("hidden",!0),j.removeAttribute("hidden")}function F(){window.removeEventListener("keydown",P),document.body.classList.remove("show-popup"),v.enableBodyScroll(document.body),j.setAttribute("hidden",!0),E.setAttribute("hidden",!0),L.setAttribute("hidden",!0)}function I(e){e.currentTarget===e.target&&F()}function P(e){"Escape"===e.code&&F()}N(),r("23Ajj"),r("2V9cG"),r("gjDBM");s=r("bpxeT"),c=r("2TvXO"),i=r("2PuEF"),s=r("bpxeT"),c=r("2TvXO"),i=r("2PuEF"),d=r("j1lrD");function R(e){return D.apply(this,arguments)}function D(){return(D=e(s)(e(c).mark((function t(o){var n,r,a,s,l,u,p,b,k,m,_;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.spinerStart)(),n=new(0,i.BookAPI),r=document.querySelector(".js-books-container"),a=r.querySelector(".js-category-title"),s=r.querySelector(".js-book-list"),e.prev=5,e.next=8,n.getBooksByCategory(o);case 8:l=e.sent,u=l.slice(0,20),p=u.map((function(e){return'\n      <li class="book-card bs-books__item" data-id=\''.concat(e._id,'\'>\n      <a class="bs-books__link" href="#">\n      <div class="bs-books__thumb">\n        <img class="bs-books__picture" src="').concat(e.book_image,'" alt="').concat(e.author," ").concat(e.title,'" loading="lazy">\n      <p class="bs-books__view">quick view</p>\n        </div>\n      <div class="bs-books__box">\n      <h3 class="bs-books__title">').concat(e.title||"No title",'</h3>\n      <p class="bs-books__author">').concat(e.author||"No author","</p>\n        </div>\n        </a>\n    </li>")})).join(""),a.textContent=o,b=a.textContent.split(" "),k=b[b.length-1],b.pop(),m=b.join(" "),a.textContent=m,(_=document.createElement("span")).textContent=" ".concat(k),a.appendChild(_).classList.add("bs-books__accent"),s.innerHTML=p,e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),console.error(e.t0);case 27:(0,d.spinerStop)();case 28:case"end":return e.stop()}}),t,null,[[5,24]])})))).apply(this,arguments)}var G=null,z=null,J=document.querySelector(".js-books-container"),V=document.querySelector(".bs-books__section");function X(){return(X=e(s)(e(c).mark((function t(){var o,n,r,a,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new(0,i.BookAPI),n=document.querySelector(".categories-list"),e.prev=2,e.next=5,o.getCategoryList();case 5:r=e.sent,(a=r.map((function(e){return e.list_name}))).sort(),s=a.map((function(e){return'<li class="categories-item" data-category="'.concat(e,'">').concat(e,"</li>")})).join(""),n.innerHTML='<li class="categories-item current_category" data-category="All categories">All categories</li>'.concat(s),z=document.querySelector('li.categories-item[data-category="All categories"]'),G=z,document.querySelectorAll(".categories-item").forEach((function(e){e.addEventListener("click",U)})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:case"end":return e.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function U(e){if(G!==e.target){G&&G.classList.remove("current_category"),e.target.classList.add("current_category"),G=e.target;var t=e.target.dataset.category;document.querySelector(".js-bs-books__section").innerHTML="",e.target==z?(K(J),V.style.display="",V.innerHTML='<h1 class="bs-books__headline">Best Sellers <span class="bs-books__accent">Books</span></h1>\n        <ul class="bs-books__categories-list" data-action="booksContainer">\n        </ul>',p(),T()):(K(V),J.style.display="",J.innerHTML='<h1 class="js-category-title bs-books__headline"></h1>\n  <ul class="js-book-list books__list" data-action="booksContainer"></ul>',R(t),T())}}function K(e){e.innerHTML="",e.style.display="none"}!function(){X.apply(this,arguments)}(),r("c2iWR"),r("5rKuw"),r("lGhGt")}();
//# sourceMappingURL=index.1195f1f9.js.map
