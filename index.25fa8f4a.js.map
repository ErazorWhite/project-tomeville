{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-ed9bf573bc2a9a44.js","src/js/bestSellerBooks.js","src/js/renderMarkup.js","node_modules/@parcel/runtime-js/lib/runtime-c7ae033f33b73b65.js","src/js/popup.js","src/js/localStorage.js","src/js/createMarkupModal.js","src/js/renderCategories.js","src/js/renderBooksByCategory.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.25fa8f4a.js\\\",\\\"9c1dv\\\":\\\"noImage-desk@1x.1332fa8f.png\\\",\\\"8bHsX\\\":\\\"index.cc7708d3.js\\\"}\"));","import { BookAPI } from './bookAPI';\nimport { renderBsBookCardsMarkup } from './renderMarkup';\nimport { Notify } from 'notiflix';\nimport { spinerStart, spinerStop } from './spinner';\n\nconst bsBooksSectionEl = document.querySelector('.js-bs-books__section');\n\nfunction onSeeMore(e) {\n  const seeMoreBtnDataRole = e.target.getAttribute('data-role');\n  if (!seeMoreBtnDataRole || seeMoreBtnDataRole !== 'see-more-btn') return;\n\n  const targetCategory = e.target.getAttribute('data-list');\n  const targetCategoryNavTabEl = document.querySelector(\n    `[data-category=\"${targetCategory}\"]`\n  );\n\n  targetCategoryNavTabEl.dispatchEvent(new Event('click'));\n}\n\nbsBooksSectionEl.addEventListener('click', onSeeMore);\n\nexport async function renderBestSellerBooks() {\n  spinerStart();\n  const api = new BookAPI();\n\n  const bestSellersBooksList = document.querySelector(\n    '.bs-books__categories-list'\n  );\n\n  const resp = await api.getTopBooks();\n  if (resp.length == 0) {\n    Notify.failure('There are no books, sorry.');\n    return;\n  }\n\n  renderBsBookCardsMarkup(resp);\n  bestSellersBooksList.insertAdjacentHTML(\n    'beforeend',\n    renderBsBookCardsMarkup(resp)\n  );\n  spinerStop();\n}\n\nrenderBestSellerBooks();\n","import noImg from '../images/noImage/noImage-desk@1x.png';\n\nexport function renderBsBookCardsMarkup(bestBooksList) {\n  const markup = bestBooksList\n    .map(\n      ({ list_name, books }) => `\n      <li class=\"bs-books__categories-item\">\n        <h2 class=\"bs-books__category-title\">${list_name}</h2>\n        <ul class=\"bs-books__list\">\n          ${books\n            .map(\n              ({ _id, list_name, author, book_image, title }) => `\n              <li class=\"bs-books__item book-card\" data-id=\"${_id}\">\n              <p class=\"bs-books__category\">${list_name}</p>\n              <a class=\"bs-books__link\" href=\"#\">\n                  <div class=\"bs-books__thumb\">\n                      <img src=\"${book_image || noImg}\" alt=\"book cover: ${\n                title || 'No title'\n              }\"class=\"bs-books__picture\" width=\"335\" height=\"485\" loading=\"lazy\">\n                      <p class=\"bs-books__view\">quick view</p>\n                  </div>\n                  <div class=\"bs-books__box\">\n                  <h3 class=\"bs-books__title\">${title || 'No title'}</h3>\n                  <p class=\"bs-books__author\">${author || 'No author'}</p>\n                  </div>\n                  </a>\n                  <div class=\"bs-books__button-box\">\n                    <button class=\"bs-books__see-more-btn\" type=\"button\" data-role=\"see-more-btn\" data-list=\"${list_name}\">see more</button>\n                  </div>\n              </li>`\n            )\n            .join('')}\n        </ul>\n      </li>`\n    )\n    .join('');\n  return markup;\n}\n\nexport const bestSellersInitMarkup = `<h1 class=\"bs-books__headline\">Best Sellers <span class=\"bs-books__accent\">Books</span></h1>\n        <ul class=\"bs-books__categories-list\" data-action=\"booksContainer\">\n        </ul>`;\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9c1dv\")).toString();","import { BookAPI } from './bookAPI';\nimport storage from './localStorage';\nimport { createBookMarkup } from './createMarkupModal';\nimport * as bodyScrollLock from 'body-scroll-lock';\n\nlet BOOK_ID;\nconst KEY_LS = 'booksInShopingList';\nlet BOOKS_IDS = {\n  id: [],\n};\nconst api = new BookAPI();\nconst { save, load } = storage;\nlet scrollLockMethod;\n\nlet booksContainerEl = document.querySelector('[data-action=\"booksContainer\"]');\n\nlet backdropEl = document.querySelector('.js-backdrop');\nlet markDataContainerEl = document.querySelector(\n  '[data-action=\"popup-data-markup\"]'\n);\nlet closePopupBtnEl = document.querySelector('.close-popup');\nlet addBookBtnEl = document.querySelector('.add-book-button');\nlet removeBookBtnEl = document.querySelector('.remove-book-button');\nlet removeBookTextEl = document.querySelector('.remove-book-text');\n\nexport function refreshPopupDOM() {\n  booksContainerEl = document.querySelector('[data-action=\"booksContainer\"]');\n\n  backdropEl = document.querySelector('.js-backdrop');\n  markDataContainerEl = document.querySelector(\n    '[data-action=\"popup-data-markup\"]'\n  );\n  closePopupBtnEl = document.querySelector('.close-popup');\n  addBookBtnEl = document.querySelector('.add-book-button');\n  removeBookBtnEl = document.querySelector('.remove-book-button');\n  removeBookTextEl = document.querySelector('.remove-book-text');\n\n  addEventListeners();\n}\n\naddEventListeners();\n\nfunction addEventListeners() {\n  booksContainerEl.addEventListener('click', onBooksContainerClick);\n  backdropEl.addEventListener('click', onBackdropClick);\n  closePopupBtnEl.addEventListener('click', onCloseBtnClick);\n  addBookBtnEl.addEventListener('click', onAddBookBtnClick);\n  removeBookBtnEl.addEventListener('click', onRemoveBookBtnClick);\n}\n\nasync function onBooksContainerClick(e) {\n  e.preventDefault();\n  if (e.currentTarget === e.target) {\n    return;\n  }\n  if (e.target.dataset.role === 'see-more-btn') {\n    return;\n  }\n  try {\n    // Тут робимо запит і передаємо данні на відмальовку у функцію\n    BOOK_ID = e.target.closest('.book-card').dataset.id;\n    api.id = BOOK_ID;\n    const { book_image, title, author, description, buy_links } =\n      await api.getBooksById();\n    markDataContainerEl.innerHTML = createBookMarkup(\n      book_image,\n      title,\n      author,\n      description,\n      buy_links[0].url,\n      buy_links[1].url,\n      buy_links[4].url\n    );\n\n    // Звертаємося до локалки і перевіряємо наявність книжки, в залеж. від відповіді виводим кнопку\n    // додати або видалити\n    BOOKS_IDS = load(KEY_LS) || {\n      id: [],\n    };\n    if (BOOKS_IDS.id.includes(BOOK_ID)) {\n      showAddOrRemoveBtn(true);\n    } else {\n      showAddOrRemoveBtn(false);\n    }\n\n    window.addEventListener('keydown', onEscPress);\n    document.body.classList.add('show-popup');\n\n    const isMenuOpen = false;\n    scrollLockMethod = !isMenuOpen ? 'disableBodyScroll' : 'enableBodyScroll';\n    bodyScrollLock[scrollLockMethod](document.body);\n  } catch {\n    err => console.log(err.message);\n  }\n}\n\n// Показуємо кнопку в залежності від значення флажка true or false.\nfunction showAddOrRemoveBtn(bookInLs) {\n  if (bookInLs) {\n    removeBookBtnEl.removeAttribute('hidden');\n    removeBookTextEl.removeAttribute('hidden');\n  } else {\n    addBookBtnEl.removeAttribute('hidden');\n  }\n}\n\nfunction onAddBookBtnClick() {\n  // Записуємо данні в локал сторейдж\n  // Замінюємо кнопку на ремув\n  BOOKS_IDS.id.push(BOOK_ID);\n  save(KEY_LS, BOOKS_IDS);\n\n  addBookBtnEl.setAttribute('hidden', true);\n  removeBookBtnEl.removeAttribute('hidden');\n  removeBookTextEl.removeAttribute('hidden');\n}\n\nfunction onRemoveBookBtnClick() {\n  // Видаляємо дані з локалки\n  // Замінюємо кнопку на едд\n  const newArrr = BOOKS_IDS.id.filter(item => item !== BOOK_ID);\n  BOOKS_IDS.id = newArrr;\n  save(KEY_LS, BOOKS_IDS);\n  removeBookBtnEl.setAttribute('hidden', true);\n  removeBookTextEl.setAttribute('hidden', true);\n  addBookBtnEl.removeAttribute('hidden');\n}\n\nfunction onCloseBtnClick() {\n  window.removeEventListener('keydown', onEscPress);\n  document.body.classList.remove('show-popup');\n  bodyScrollLock.enableBodyScroll(document.body);\n\n  addBookBtnEl.setAttribute('hidden', true);\n  removeBookBtnEl.setAttribute('hidden', true);\n  removeBookTextEl.setAttribute('hidden', true);\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseBtnClick();\n  }\n}\n\nfunction onEscPress(e) {\n  if (e.code === 'Escape') {\n    onCloseBtnClick();\n  }\n}\n","// Файлик для работы с локальным хранилищем\n\n// Использовать вот так\n// import storage from './storage';\n// const { save, load } = storage;\n// save(CONST_ID, data); // Запись в local storage\n// const playerNewTime = load(CONST_ID); // Чтение\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst clear = () => {\n  try {\n    localStorage.clear();\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n  clear,\n};\n","import noImg from '../images/noImage/noImage-desk@1x.png';\n\nexport function createBookMarkup(\n  bookImg,\n  title,\n  author,\n  description,\n  urlAmaz,\n  urlApBooks,\n  urlBookShop\n) {\n  return `<div class=\"popup-box-img\"><img src=\"${\n    bookImg || noImg\n  }\" alt=\"book cover: ${title || 'No title'}\" class=\"popup-img\"></div>\n<div class=\"popup-text\">\n  <h2 class=\"popup-title\">${title || 'No title'}</h2>\n  <p class=\"popup-author\">${author || 'No author'}</p>\n  <p class=\"popup-description\">${description || 'No description'}</p>\n  <ul class=\"popup-img-links\">\n    <li class=\"popup-img-links__item\">\n      <a href=\"${urlAmaz}\" target=\"_blank\" rel=\"noreferrer noopener\">\n        <div class=\"thumbAmazon popup-amazon-store\"></div>\n      </a>\n    </li>\n    <li class=\"popup-img-links__item\">\n      <a href=\"${urlApBooks}\" target=\"_blank\" rel=\"noreferrer noopener\">\n        <div class=\"thumbAppleBook popup-app-book-store\"></div>\n      </a>\n    </li>\n    <li class=\"popup-img-links__item\">\n      <a href=\"${urlBookShop}\" target=\"_blank\" rel=\"noreferrer noopener\">\n        <div class=\"thumbBookshop popup-book-store\"></div>\n      </a>\n    </li>\n  </ul>\n</div>`;\n}\n","import { BookAPI } from './bookAPI';\nimport {\n  displayBooksByCategory,\n  booksByCategoryInitMarkup,\n} from './renderBooksByCategory';\nimport { renderBestSellerBooks } from './bestSellerBooks';\nimport { bestSellersInitMarkup } from './renderMarkup';\nimport { refreshPopupDOM } from './popup';\n\nlet currentCategory = null; // Змінна для зберігання посилання на поточний елемент категорії\nlet allCategoriesEl = null;\nconst booksByCategoriesSectionEl = document.querySelector(\n  '.js-books-container'\n);\nconst bestSellerBooksSectionEl = document.querySelector('.bs-books__section');\n\n// Функція для отримання та відображення категорій книг\nasync function displayBookCategories() {\n  const bookAPI = new BookAPI();\n  const categoriesList = document.querySelector('.categories-list');\n\n  try {\n    // Отримання списку об'єктів категорій книг з BookAPI\n    const response = await bookAPI.getCategoryList();\n    const categories = response.map(item => item.list_name);\n\n    // Сортування категорій в алфавітному порядку\n    categories.sort();\n\n    // Створення розмітки категорій\n    const markup = categories\n      .map(\n        category =>\n          `<li class=\"categories-item\" data-category=\"${category}\">${category}</li>`\n      )\n      .join('');\n\n    // Додавання розмітки до <ul> з початковим елементом\n    categoriesList.innerHTML = `<li class=\"categories-item current_category\" data-category=\"All categories\">All categories</li>${markup}`;\n    allCategoriesEl = document.querySelector(\n      'li.categories-item[data-category=\"All categories\"]'\n    );\n    currentCategory = allCategoriesEl;\n\n    // Додаємо обробник подій кліку до кожного елемента категорії\n    const categoryItems = document.querySelectorAll('.categories-item');\n    categoryItems.forEach(item => {\n      item.addEventListener('click', handleCategoryClick);\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// Виклик функції для відображення категорій книг\ndisplayBookCategories();\n\n// Функція, яка буде викликатися при кліку на елемент категорії\nfunction handleCategoryClick(event) {\n  // Перевіряємо, чи був клік на іншому елементі категорії\n  if (currentCategory !== event.target) {\n    // Видаляємо клас \"current_category\" з попереднього поточного елемента\n    if (currentCategory) {\n      currentCategory.classList.remove('current_category');\n    }\n\n    // Додаємо клас \"current_category\" до нового поточного елемента\n    event.target.classList.add('current_category');\n\n    // Зберігаємо посилання на новий поточний елемент\n    currentCategory = event.target;\n\n    const category = event.target.dataset.category;\n\n    // Викликаємо функцію для відображення книг за обраною категорією\n\n    document.querySelector('.js-bs-books__section').innerHTML = '';\n    if (event.target == allCategoriesEl) {\n      hideSection(booksByCategoriesSectionEl);\n      bestSellerBooksSectionEl.style.display = '';\n      bestSellerBooksSectionEl.innerHTML = bestSellersInitMarkup;\n\n      renderBestSellerBooks();\n      refreshPopupDOM();\n    } else {\n      hideSection(bestSellerBooksSectionEl);\n      booksByCategoriesSectionEl.style.display = '';\n      booksByCategoriesSectionEl.innerHTML = booksByCategoryInitMarkup;\n\n      displayBooksByCategory(category);\n      refreshPopupDOM();\n    }\n  }\n}\n\nexport function hideSection(sectionEl) {\n  sectionEl.innerHTML = '';\n  sectionEl.style.display = 'none';\n}\n","import { BookAPI } from './bookAPI';\nimport { spinerStart, spinerStop } from './spinner';\n\nexport async function displayBooksByCategory(category) {\n  spinerStart();\n  const bookAPI = new BookAPI();\n  const booksContainer = document.querySelector('.js-books-container');\n  const categoryTitle = booksContainer.querySelector('.js-category-title');\n  const bookList = booksContainer.querySelector('.js-book-list');\n\n  try {\n    const books = await bookAPI.getBooksByCategory(category);\n\n    // Обмежуємо кількість книг до 20\n    const limitedBooks = books.slice(0, 20);\n\n    // Створюємо розмітку для кожної книги\n    const markup = limitedBooks\n      .map(book => {\n        return `\n      <li class=\"book-card bs-books__item\" data-id='${book._id}'>\n      <a class=\"bs-books__link\" href=\"#\">\n      <div class=\"bs-books__thumb\">\n        <img class=\"bs-books__picture\" src=\"${book.book_image}\" alt=\"${\n          book.author\n        } ${book.title}\" loading=\"lazy\">\n      <p class=\"bs-books__view\">quick view</p>\n        </div>\n      <div class=\"bs-books__box\">\n      <h3 class=\"bs-books__title\">${book.title || 'No title'}</h3>\n      <p class=\"bs-books__author\">${book.author || 'No author'}</p>\n        </div>\n        </a>\n    </li>`;\n      })\n      .join('');\n\n    // Оновлення заголовка з обраною категорією\n\n    categoryTitle.textContent = category;\n\n    const array = categoryTitle.textContent.split(' ');\n    const lastElement = array[array.length - 1];\n\n    array.pop();\n\n    const updatedTitle = array.join(' ');\n\n    categoryTitle.textContent = updatedTitle;\n\n    // titleLastWord.textContent = lastElement;\n\n    const span = document.createElement('span');\n    span.textContent = ` ${lastElement}`;\n    // console.log(span.textContent);\n\n    const accentLastWord = categoryTitle.appendChild(span);\n    accentLastWord.classList.add('bs-books__accent');\n    // console.log(titleLastWord.textContent);\n\n    // Додаємо розмітку до контейнера з книгами\n    bookList.innerHTML = markup;\n  } catch (error) {\n    console.error(error);\n  }\n  spinerStop();\n}\n\nexport const booksByCategoryInitMarkup = `<h1 class=\"js-category-title bs-books__headline\"></h1>\n  <ul class=\"js-book-list books__list\" data-action=\"booksContainer\"></ul>`;"],"names":["parcelRequire","register","JSON","parse","$hkoFk","$8fa1c37b43059e2f$export$2191c5679916e4f6","bestBooksList","map","list_name","list_name1","books","_id","author","book_image","title","$parcel$interopDefault","$76213256ab40339f$exports","join","URL","resolve","import","meta","url","toString","async","$2353f7d76a23a473$export$7c77a3787b3a4ce0","$04jNI","spinerStart","api","BookAPI","bestSellersBooksList","document","querySelector","resp","getTopBooks","length","insertAdjacentHTML","spinerStop","$7Y9D8","Notify","failure","addEventListener","e","seeMoreBtnDataRole","target","getAttribute","targetCategory","dispatchEvent","Event","$2338c8cd734f85a6$export$2e2bcd8739ae039","key","value","serializedState","stringify","localStorage","setItem","error","console","message","getItem","undefined","removeItem","clear","$7a2a395e5a90914a$export$fc330cc8afb2a391","bookImg","description","urlAmaz","urlApBooks","urlBookShop","$8eba2bb3fe686d91$var$BOOK_ID","$8eba2bb3fe686d91$var$BOOKS_IDS","id","$8eba2bb3fe686d91$var$api","save","$8eba2bb3fe686d91$var$save","load","$8eba2bb3fe686d91$var$load","$8eba2bb3fe686d91$var$scrollLockMethod","$8eba2bb3fe686d91$var$booksContainerEl","$8eba2bb3fe686d91$var$backdropEl","$8eba2bb3fe686d91$var$markDataContainerEl","$8eba2bb3fe686d91$var$closePopupBtnEl","$8eba2bb3fe686d91$var$addBookBtnEl","$8eba2bb3fe686d91$var$removeBookBtnEl","$8eba2bb3fe686d91$var$removeBookTextEl","$8eba2bb3fe686d91$export$c1840df5536bfbea","$8eba2bb3fe686d91$var$addEventListeners","$8eba2bb3fe686d91$var$onBooksContainerClick","$8eba2bb3fe686d91$var$onBackdropClick","$8eba2bb3fe686d91$var$onCloseBtnClick","$8eba2bb3fe686d91$var$onAddBookBtnClick","$8eba2bb3fe686d91$var$onRemoveBookBtnClick","preventDefault","currentTarget","dataset","role","closest","buy_links","getBooksById","innerHTML","includes","$8eba2bb3fe686d91$var$showAddOrRemoveBtn","window","$8eba2bb3fe686d91$var$onEscPress","body","classList","add","$jQ7WT","bookInLs","removeAttribute","push","setAttribute","newArrr","filter","item","removeEventListener","remove","enableBodyScroll","code","$f2cb6b4491c11b62$export$dd533af58c47f1e3","category","bookAPI","booksContainer","categoryTitle","bookList","getBooksByCategory","markup","slice","book","textContent","array","split","lastElement","pop","updatedTitle","span","createElement","appendChild","$0062a3ce137c21ac$var$currentCategory","$0062a3ce137c21ac$var$allCategoriesEl","$0062a3ce137c21ac$var$booksByCategoriesSectionEl","$0062a3ce137c21ac$var$bestSellerBooksSectionEl","$0062a3ce137c21ac$var$handleCategoryClick","event","$0062a3ce137c21ac$export$e0f58372dd4354b2","style","display","sectionEl","categoriesList","categories","getCategoryList","sort","querySelectorAll","forEach","$0062a3ce137c21ac$var$displayBookCategories"],"version":3,"file":"index.25fa8f4a.js.map"}